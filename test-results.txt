
> enterprise-cash-flow@2.0.0 test
> react-scripts test --coverage --watchAll=false

PASS src/utils/__tests__/formatters.test.js
FAIL src/__tests__/utils/financialFormulas.test.js
  ‚óè Financial Formulas ‚Ä∫ NPV (Net Present Value) ‚Ä∫ should calculate positive NPV for profitable investment

    expect(received).toBeCloseTo(expected, precision)

    Expected: 68618.28
    Received: 68618.02

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   0.2599999999947613

    [0m [90m 20 |[39m       [36mconst[39m result [33m=[39m calculateNPV(cashFlows[33m,[39m discountRate[33m,[39m initialInvestment)[33m;[39m
     [90m 21 |[39m
    [31m[1m>[22m[39m[90m 22 |[39m       expect(result[33m.[39mnpv)[33m.[39mtoBeCloseTo([35m68618.28[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 23 |[39m       expect(result[33m.[39mprofitabilityIndex)[33m.[39mtoBeCloseTo([35m1.14[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 24 |[39m       expect(result[33m.[39mpresentValues)[33m.[39mtoHaveLength([35m5[39m)[33m;[39m
     [90m 25 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:22:26)

  ‚óè Financial Formulas ‚Ä∫ IRR (Internal Rate of Return) ‚Ä∫ should calculate IRR for typical investment

    expect(received).toBeCloseTo(expected, precision)

    Expected: 14.49
    Received: 15.32

    Expected precision:    1
    Expected difference: < 0.05
    Received difference:   0.8300000000000001

    [0m [90m 54 |[39m
     [90m 55 |[39m       expect(result[33m.[39misValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 56 |[39m       expect(result[33m.[39mirr)[33m.[39mtoBeCloseTo([35m14.49[39m[33m,[39m [35m1[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m
     [90m 59 |[39m     it([32m'should handle multiple sign changes in cash flows'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:56:26)

  ‚óè Financial Formulas ‚Ä∫ Cash Flow Projections ‚Ä∫ should calculate present values with discount rate

    expect(received).toBeCloseTo(expected, precision)

    Expected: 95324.07
    Received: 95370.37

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   46.29999999998836

    [0m [90m 205 |[39m
     [90m 206 |[39m       expect(result[33m.[39mpresentValues[[35m0[39m])[33m.[39mtoBe([35m100000[39m)[33m;[39m [90m// First period not discounted[39m
    [31m[1m>[22m[39m[90m 207 |[39m       expect(result[33m.[39mpresentValues[[35m1[39m])[33m.[39mtoBeCloseTo([35m95324.07[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 208 |[39m       expect(result[33m.[39mpresentValues[[35m2[39m])[33m.[39mtoBeCloseTo([35m90889.75[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 209 |[39m       expect(result[33m.[39mtotalPV)[33m.[39mtoBeCloseTo([35m286213.82[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 210 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:207:39)

  ‚óè Financial Formulas ‚Ä∫ Edge Cases and Validation ‚Ä∫ should handle very small discount rates

    expect(received).toBeCloseTo(expected, precision)

    Expected: 49.97
    Received: 49.94

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   0.030000000000001137

    [0m [90m 266 |[39m       [36mconst[39m result [33m=[39m calculateNPV(cashFlows[33m,[39m discountRate[33m,[39m initialInvestment)[33m;[39m
     [90m 267 |[39m
    [31m[1m>[22m[39m[90m 268 |[39m       expect(result[33m.[39mnpv)[33m.[39mtoBeCloseTo([35m49.97[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 269 |[39m     })[33m;[39m
     [90m 270 |[39m
     [90m 271 |[39m     it([32m'should handle zero cash flows'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:268:26)

PASS src/utils/__tests__/dataValidation.test.js
FAIL src/__tests__/workers/financialCalculator.worker.test.js
  ‚óè Financial Calculator Worker ‚Ä∫ Basic Worker Functionality ‚Ä∫ should handle successful calculation messages

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 52 |[39m       }[33m;[39m
     [90m 53 |[39m
    [31m[1m>[22m[39m[90m 54 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 55 |[39m
     [90m 56 |[39m       [90m// Verify response[39m
     [90m 57 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:54:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Basic Worker Functionality ‚Ä∫ should handle calculation errors gracefully

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 80 |[39m       }[33m;[39m
     [90m 81 |[39m
    [31m[1m>[22m[39m[90m 82 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 83 |[39m
     [90m 84 |[39m       [90m// Verify error response[39m
     [90m 85 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:82:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle NPV calculation message

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 103 |[39m       }[33m;[39m
     [90m 104 |[39m
    [31m[1m>[22m[39m[90m 105 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 106 |[39m
     [90m 107 |[39m       [90m// Verify NPV calculation[39m
     [90m 108 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:105:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle IRR calculation message

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 126 |[39m       }[33m;[39m
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 129 |[39m
     [90m 130 |[39m       [90m// Verify IRR calculation[39m
     [90m 131 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:128:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle payback period calculation

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 150 |[39m       }[33m;[39m
     [90m 151 |[39m
    [31m[1m>[22m[39m[90m 152 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 153 |[39m
     [90m 154 |[39m       [90m// Verify payback calculation[39m
     [90m 155 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:152:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle break-even analysis

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 175 |[39m       }[33m;[39m
     [90m 176 |[39m
    [31m[1m>[22m[39m[90m 177 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 178 |[39m
     [90m 179 |[39m       [90m// Verify break-even calculation[39m
     [90m 180 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:177:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle cash flow projections

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 202 |[39m       }[33m;[39m
     [90m 203 |[39m
    [31m[1m>[22m[39m[90m 204 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 205 |[39m
     [90m 206 |[39m       [90m// Verify projection calculation[39m
     [90m 207 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:204:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Performance and Large Dataset Handling ‚Ä∫ should handle large dataset calculations efficiently

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 235 |[39m       [36mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m
     [90m 236 |[39m
    [31m[1m>[22m[39m[90m 237 |[39m       mockWorkerScope[33m.[39monmessage({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 238 |[39m         data[33m:[39m {
     [90m 239 |[39m           periodsInputDataRaw[33m:[39m largeDataset[33m,[39m
     [90m 240 |[39m           periodTypeLabel[33m:[39m [32m'MONTHLY'[39m[33m,[39m[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:237:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Performance and Large Dataset Handling ‚Ä∫ should batch process multiple calculation types

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 285 |[39m       }[33m;[39m
     [90m 286 |[39m
    [31m[1m>[22m[39m[90m 287 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 288 |[39m
     [90m 289 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 290 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:287:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should validate NPV inputs

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 325 |[39m       invalidMessages[33m.[39mforEach((messageData) [33m=>[39m {
     [90m 326 |[39m         mockPostMessage[33m.[39mmockClear()[33m;[39m
    [31m[1m>[22m[39m[90m 327 |[39m         mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 328 |[39m
     [90m 329 |[39m         expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 330 |[39m           expect[33m.[39mobjectContaining({[0m

      at forEach (src/__tests__/workers/financialCalculator.worker.test.js:327:25)
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:325:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should handle unknown calculation types

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 344 |[39m       }[33m;[39m
     [90m 345 |[39m
    [31m[1m>[22m[39m[90m 346 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 347 |[39m
     [90m 348 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 349 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:346:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should handle thread safety for concurrent calculations

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 373 |[39m       [90m// Send multiple messages quickly[39m
     [90m 374 |[39m       messages[33m.[39mforEach((msg) [33m=>[39m {
    [31m[1m>[22m[39m[90m 375 |[39m         mockWorkerScope[33m.[39monmessage({ data[33m:[39m msg })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 376 |[39m       })[33m;[39m
     [90m 377 |[39m
     [90m 378 |[39m       [90m// Verify both calculations completed[39m[0m

      at forEach (src/__tests__/workers/financialCalculator.worker.test.js:375:25)
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:374:16)

  ‚óè Financial Calculator Worker ‚Ä∫ Memory Management ‚Ä∫ should clean up resources after calculation

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 401 |[39m       }[33m;[39m
     [90m 402 |[39m
    [31m[1m>[22m[39m[90m 403 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m largeCalculation })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 404 |[39m
     [90m 405 |[39m       [90m// Verify calculation completed[39m
     [90m 406 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:403:23)

FAIL src/__tests__/utils/customMatchers.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/testDataFactories.comprehensive.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/accessibilityUtils.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/testDataFactories.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/services/export/__tests__/ExportService.test.js
  ‚óè ExportService ‚Ä∫ Data Validation ‚Ä∫ should detect invalid data

    TypeError: Cannot read properties of null (reading 'charts')

    [0m [90m 322 |[39m     [90m// Format-specific validation[39m
     [90m 323 |[39m     [36mif[39m (format [33m===[39m [33mExportFormat[39m[33m.[39m[33mPDF[39m) {
    [31m[1m>[22m[39m[90m 324 |[39m       [36mif[39m (data[33m.[39mcharts [33m&&[39m [33m![39m[33mArray[39m[33m.[39misArray(data[33m.[39mcharts)) {
     [90m     |[39m                [31m[1m^[22m[39m
     [90m 325 |[39m         errors[33m.[39mpush([32m'Charts must be an array'[39m)[33m;[39m
     [90m 326 |[39m       }
     [90m 327 |[39m     } [36melse[39m [36mif[39m (format [33m===[39m [33mExportFormat[39m[33m.[39m[33mEXCEL[39m) {[0m

      at ExportService.validateData (src/services/export/ExportService.js:324:16)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:56:36)

  ‚óè ExportService ‚Ä∫ Branding ‚Ä∫ should update branding configuration

    expect(received).toBe(expected) // Object.is equality

    Expected: "#ff0000"
    Received: "#007bff"

    [0m [90m 138 |[39m       [36mconst[39m updated [33m=[39m exportService[33m.[39mgetBranding()[33m;[39m
     [90m 139 |[39m       
    [31m[1m>[22m[39m[90m 140 |[39m       expect(updated[33m.[39mcolors[33m.[39mprimary)[33m.[39mtoBe([32m'#ff0000'[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 141 |[39m       expect(updated[33m.[39mwatermark[33m.[39mtext)[33m.[39mtoBe([32m'CONFIDENTIAL'[39m)[33m;[39m
     [90m 142 |[39m     })[33m;[39m
     [90m 143 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:140:38)

  ‚óè ExportService ‚Ä∫ Cross-browser Compatibility ‚Ä∫ should handle missing URL API

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of undefined (reading 'createObjectURL')"

        [0m [90m 264 |[39m [90m   */[39m
         [90m 265 |[39m   download(blob[33m,[39m fileName) {
        [31m[1m>[22m[39m[90m 266 |[39m     [36mconst[39m url [33m=[39m [33mURL[39m[33m.[39mcreateObjectURL(blob)[33m;[39m
         [90m     |[39m                     [31m[1m^[22m[39m
         [90m 267 |[39m     [36mconst[39m link [33m=[39m document[33m.[39mcreateElement([32m'a'[39m)[33m;[39m
         [90m 268 |[39m     link[33m.[39mhref [33m=[39m url[33m;[39m
         [90m 269 |[39m     link[33m.[39mdownload [33m=[39m fileName[33m;[39m[0m

      at ExportService.download (src/services/export/ExportService.js:266:21)
      at src/services/export/__tests__/ExportService.test.js:209:28
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:83:11)
      at Object.toThrow (node_modules/expect/build/index.js:382:21)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:209:74)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:209:74)

FAIL src/__tests__/services/financial/FinancialCalculationService.test.js
  ‚óè Test suite failed to run

    Cannot find module 'vitest' from 'src/__tests__/services/financial/FinancialCalculationService.test.js'

    [0m[31m[1m>[22m[39m[90m 1 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m vi } [36mfrom[39m [32m'vitest'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 2 |[39m [36mimport[39m { [33mFinancialCalculationService[39m } [36mfrom[39m [32m'../../../services/financial/FinancialCalculationService'[39m[33m;[39m
     [90m 3 |[39m
     [90m 4 |[39m [90m// Mock Worker[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/__tests__/services/financial/FinancialCalculationService.test.js:1:1)

FAIL src/__tests__/integration/pdfParser.integration.test.js (5.68 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 50 |[39m   describe([32m'File Validation'[39m[33m,[39m () [33m=>[39m {
     [90m 51 |[39m     it([32m'should validate PDF file type'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 52 |[39m       [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m usePdfParser())[33m;[39m
     [90m    |[39m                                    [31m[1m^[22m[39m
     [90m 53 |[39m       
     [90m 54 |[39m       [36mconst[39m invalidFile [33m=[39m [36mnew[39m [33mFile[39m([[32m'content'[39m][33m,[39m [32m'test.txt'[39m[33m,[39m { type[33m:[39m [32m'text/plain'[39m })[33m;[39m
     [90m 55 |[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:293:7)
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:52:36)

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:90:25

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:90:25

    console.error
      Erro ao analisar PDF: Error: Biblioteca PDF.js n√£o dispon√≠vel. Verifique a conex√£o de internet.
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:35:15)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:110:32
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:64:24
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2512:16)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:109:18
          at Object.toThrow (/home/user/EnterpriseCashFlow/node_modules/expect/build/index.js:267:58)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:112:18)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:110:32
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at src/__tests__/integration/pdfParser.integration.test.js:109:18
      at Object.toThrow (node_modules/expect/build/index.js:267:58)
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:112:18)

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:126:9

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:126:9

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:150:25

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:150:25

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:174:25

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:174:25

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:204:25

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:204:25

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:232:25

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:232:25

    console.error
      Erro ao analisar PDF: Error: Invalid PDF structure
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:250:33)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:255:11

    console.error
      Erro ao analisar PDF: TypeError: Cannot read properties of undefined (reading '5')
          at forEach (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
          at Object.extractTextFromPdf (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:63:27)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:285:11

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:285:11

    console.error
      Erro ao analisar PDF: Error: Erro ao ler o arquivo PDF.
          at Object.onerror (/home/user/EnterpriseCashFlow/src/hooks/usePdfParser.js:42:39)
          at /home/user/EnterpriseCashFlow/src/__tests__/integration/pdfParser.integration.test.js:297:33
          at Timeout.task [as _onTimeout] (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/browser/Window.js:516:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

    [0m [90m 94 |[39m       [36mreturn[39m { text[33m:[39m fullText[33m.[39mtrim()[33m,[39m pageCount[33m:[39m numPages }[33m;[39m
     [90m 95 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 96 |[39m       console[33m.[39merror([32m"Erro ao analisar PDF:"[39m[33m,[39m err)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 97 |[39m       setParsingError(err)[33m;[39m
     [90m 98 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 99 |[39m       [36mthrow[39m err[33m;[39m[0m

      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:96:15)
      at src/__tests__/integration/pdfParser.integration.test.js:305:11

    console.error
      Warning: You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);

      at printWarning (node_modules/react/cjs/react.development.js:209:30)
      at error (node_modules/react/cjs/react.development.js:183:7)
      at node_modules/react/cjs/react.development.js:2564:15

  ‚óè PDF Parser Integration Tests ‚Ä∫ File Validation ‚Ä∫ should validate PDF file type

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 60 |[39m       })[33m.[39mrejects[33m.[39mtoThrow([32m'Arquivo inv√°lido'[39m)[33m;[39m
     [90m 61 |[39m
    [31m[1m>[22m[39m[90m 62 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 63 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError[33m.[39mmessage)[33m.[39mtoContain([32m'PDF v√°lido'[39m)[33m;[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:62:43)

  ‚óè PDF Parser Integration Tests ‚Ä∫ File Validation ‚Ä∫ should accept valid PDF files

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:90:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ PDF.js Library Integration ‚Ä∫ should use PDF.js to load document

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:126:9

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should extract text from all pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:150:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should preserve text structure and spacing

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:174:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should handle PDFs with many pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:204:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should handle empty pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:232:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle PDF loading errors

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 257 |[39m       })[33m.[39mrejects[33m.[39mtoThrow([32m'Invalid PDF structure'[39m)[33m;[39m
     [90m 258 |[39m
    [31m[1m>[22m[39m[90m 259 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 260 |[39m       expect(result[33m.[39mcurrent[33m.[39misParsing)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 261 |[39m     })[33m;[39m
     [90m 262 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:259:43)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle page extraction errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Page extraction failed"
    Received message:   "Cannot read properties of undefined (reading '5')"

        [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
         [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
        [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
         [90m    |[39m                                              [31m[1m^[22m[39m
         [90m 65 |[39m           
         [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
         [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
                at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:285:11
      at Object.toThrow (node_modules/expect/build/index.js:285:22)
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:287:18)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Loading State Management ‚Ä∫ should manage isParsing state correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 336 |[39m
     [90m 337 |[39m       [90m// Check loading state immediately[39m
    [31m[1m>[22m[39m[90m 338 |[39m       expect(result[33m.[39mcurrent[33m.[39misParsing)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 339 |[39m
     [90m 340 |[39m       [90m// Resolve the document loading[39m
     [90m 341 |[39m       resolveDocument(mockDocument)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:338:40)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Loading State Management ‚Ä∫ should reset error state on new extraction

    TypeError: Cannot read properties of null (reading 'parsingError')

    [0m [90m 360 |[39m       }
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 363 |[39m
     [90m 364 |[39m       [90m// Now try with valid file[39m
     [90m 365 |[39m       [36mconst[39m validFile [33m=[39m [36mnew[39m [33mFile[39m([[32m'%PDF-1.4'[39m][33m,[39m [32m'test.pdf'[39m[33m,[39m { type[33m:[39m [32m'application/pdf'[39m })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:362:29)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Financial Data Extraction Scenarios ‚Ä∫ should extract Brazilian financial statements

    TypeError: Cannot read properties of null (reading 'extractTextFromPdf')

    [0m [90m 397 |[39m       [36mlet[39m extractedData[33m;[39m
     [90m 398 |[39m       [36mawait[39m act([36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 399 |[39m         extractedData [33m=[39m [36mawait[39m result[33m.[39mcurrent[33m.[39mextractTextFromPdf(pdfFile)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 400 |[39m       })[33m;[39m
     [90m 401 |[39m
     [90m 402 |[39m       expect(extractedData[33m.[39mtext)[33m.[39mtoContain([32m'DEMONSTRA√á√ÉO DE RESULTADOS'[39m)[33m;[39m[0m

      at src/__tests__/integration/pdfParser.integration.test.js:399:46
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:398:16)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Financial Data Extraction Scenarios ‚Ä∫ should extract financial tables and preserve structure

    TypeError: Cannot read properties of null (reading 'extractTextFromPdf')

    [0m [90m 429 |[39m       [36mlet[39m extractedData[33m;[39m
     [90m 430 |[39m       [36mawait[39m act([36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 431 |[39m         extractedData [33m=[39m [36mawait[39m result[33m.[39mcurrent[33m.[39mextractTextFromPdf(pdfFile)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 432 |[39m       })[33m;[39m
     [90m 433 |[39m
     [90m 434 |[39m       expect(extractedData[33m.[39mtext)[33m.[39mtoContain([32m'Q1 2024'[39m)[33m;[39m[0m

      at src/__tests__/integration/pdfParser.integration.test.js:431:46
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:430:16)

FAIL src/__tests__/integration/excelParser.integration.test.js (5.764 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 40 |[39m   describe([32m'Worksheet Detection'[39m[33m,[39m () [33m=>[39m {
     [90m 41 |[39m     it([32m'should find worksheet with financial headers'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 42 |[39m       [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useExcelParser(mockExcelJS))[33m;[39m
     [90m    |[39m                                    [31m[1m^[22m[39m
     [90m 43 |[39m       
     [90m 44 |[39m       [90m// Setup mock data[39m
     [90m 45 |[39m       mockExcelJS[33m.[39mmockWorksheet[33m.[39mgetRow[33m.[39mmockImplementation((rowNum) [33m=>[39m {[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:293:7)
      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:42:36)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Worksheet Detection ‚Ä∫ should find worksheet with financial headers

    expect(received).toBeNull()

    Received: "Nenhum dado financeiro encontrado na planilha."

    [0m [90m 57 |[39m       })[33m;[39m
     [90m 58 |[39m
    [31m[1m>[22m[39m[90m 59 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeNull()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 60 |[39m       expect(parsedData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 61 |[39m     })[33m;[39m
     [90m 62 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:59:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Worksheet Detection ‚Ä∫ should fallback to sheet with "Dados" in name

    expect(jest.fn()).not.toHaveBeenCalled()

    Expected number of calls: 0
    Received number of calls: 1

    1: 1

    [0m [90m 88 |[39m
     [90m 89 |[39m       expect(dataSheet[33m.[39mgetRow)[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 90 |[39m       expect(instructionSheet[33m.[39mgetRow)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 91 |[39m     })[33m;[39m
     [90m 92 |[39m
     [90m 93 |[39m     it([32m'should handle worksheets without proper headers'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:90:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods with strict "Per√≠odo X" pattern

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 129 |[39m       })[33m;[39m
     [90m 130 |[39m
    [31m[1m>[22m[39m[90m 131 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 132 |[39m     })[33m;[39m
     [90m 133 |[39m
     [90m 134 |[39m     it([32m'should detect periods with loose patterns (P1, P2, etc)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:131:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods with loose patterns (P1, P2, etc)

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 153 |[39m       })[33m;[39m
     [90m 154 |[39m
    [31m[1m>[22m[39m[90m 155 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 156 |[39m     })[33m;[39m
     [90m 157 |[39m
     [90m 158 |[39m     it([32m'should detect periods by column position between Description and Notes'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:155:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods by column position between Description and Notes

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 177 |[39m       })[33m;[39m
     [90m 178 |[39m
    [31m[1m>[22m[39m[90m 179 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
     [90m 182 |[39m     it([32m'should limit detected periods to MAX_PERIODS'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:179:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should limit detected periods to MAX_PERIODS

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 209 |[39m       })[33m;[39m
     [90m 210 |[39m
    [31m[1m>[22m[39m[90m 211 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m6[39m)[33m;[39m [90m// MAX_PERIODS is 6[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 212 |[39m     })[33m;[39m
     [90m 213 |[39m   })[33m;[39m
     [90m 214 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:211:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should extract revenue data correctly

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 237 |[39m       })[33m;[39m
     [90m 238 |[39m
    [31m[1m>[22m[39m[90m 239 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 240 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 241 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m 242 |[39m       expect(parsedData[[35m0[39m][33m.[39moperatingExpenses)[33m.[39mtoBe([35m300000[39m)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:239:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should handle working capital days fields

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 266 |[39m       })[33m;[39m
     [90m 267 |[39m
    [31m[1m>[22m[39m[90m 268 |[39m       expect(parsedData[[35m0[39m][33m.[39maccountsReceivableDays)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 269 |[39m       expect(parsedData[[35m0[39m][33m.[39minventoryDays)[33m.[39mtoBe([35m30[39m)[33m;[39m
     [90m 270 |[39m       expect(parsedData[[35m0[39m][33m.[39maccountsPayableDays)[33m.[39mtoBe([35m60[39m)[33m;[39m
     [90m 271 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:268:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should handle percentage values correctly

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 295 |[39m       })[33m;[39m
     [90m 296 |[39m
    [31m[1m>[22m[39m[90m 297 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m [90m// Converted from 0.45[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 298 |[39m     })[33m;[39m
     [90m 299 |[39m
     [90m 300 |[39m     it([32m'should skip grey-filled cells'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:297:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should skip grey-filled cells

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 325 |[39m       })[33m;[39m
     [90m 326 |[39m
    [31m[1m>[22m[39m[90m 327 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Grey cell skipped[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 328 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 329 |[39m     })[33m;[39m
     [90m 330 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:327:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle empty worksheets

    expect(received).toContain(expected) // indexOf

    Expected substring: "dados encontrados"
    Received string:    "Cannot read properties of undefined (reading 'values')"

    [0m [90m 359 |[39m       })[33m;[39m
     [90m 360 |[39m
    [31m[1m>[22m[39m[90m 361 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoContain([32m'dados encontrados'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 362 |[39m     })[33m;[39m
     [90m 363 |[39m
     [90m 364 |[39m     it([32m'should handle missing required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:361:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle missing required fields

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 385 |[39m       })[33m;[39m
     [90m 386 |[39m
    [31m[1m>[22m[39m[90m 387 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 388 |[39m     })[33m;[39m
     [90m 389 |[39m   })[33m;[39m
     [90m 390 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:387:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Validation ‚Ä∫ should validate numeric values

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 412 |[39m       })[33m;[39m
     [90m 413 |[39m
    [31m[1m>[22m[39m[90m 414 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Invalid value skipped[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m
     [90m 417 |[39m     it([32m'should handle formula results'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:414:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Validation ‚Ä∫ should handle formula results

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 439 |[39m       })[33m;[39m
     [90m 440 |[39m
    [31m[1m>[22m[39m[90m 441 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m [90m// Extracts result from formula[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 442 |[39m     })[33m;[39m
     [90m 443 |[39m   })[33m;[39m
     [90m 444 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:441:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Performance Tests ‚Ä∫ should handle large Excel files efficiently

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 477 |[39m
     [90m 478 |[39m       expect(executionTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m [90m// Should complete within 5 seconds[39m
    [31m[1m>[22m[39m[90m 479 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 480 |[39m     })[33m;[39m
     [90m 481 |[39m   })[33m;[39m
     [90m 482 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:479:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle merged cells

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 503 |[39m       })[33m;[39m
     [90m 504 |[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 506 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m 507 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 508 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:505:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle hidden rows and columns

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 533 |[39m
     [90m 534 |[39m       [90m// Hidden rows should still be processed in this implementation[39m
    [31m[1m>[22m[39m[90m 535 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 536 |[39m       expect(parsedData[[35m0[39m][33m.[39moperatingExpenses)[33m.[39mtoBe([35m300000[39m)[33m;[39m
     [90m 537 |[39m     })[33m;[39m
     [90m 538 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:535:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle special characters in field names

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 560 |[39m       })[33m;[39m
     [90m 561 |[39m
    [31m[1m>[22m[39m[90m 562 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 563 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m 564 |[39m       expect(parsedData[[35m0[39m][33m.[39mdepreciation)[33m.[39mtoBe([35m20000[39m)[33m;[39m
     [90m 565 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:562:24)

(node:13229) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 8)
(Use `node --trace-warnings ...` to show where the warning was created)
(node:13229) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 9)
(node:13229) PromiseRejectionHandledWarning: Promise rejection was handled asynchronously (rejection id: 10)
FAIL src/__tests__/integration/aiService.integration.test.js (5.833 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 91 |[39m   describe([32m'Provider Configuration'[39m[33m,[39m () [33m=>[39m {
     [90m 92 |[39m     it([32m'should initialize with default provider'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 93 |[39m       [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useAiService())[33m;[39m
     [90m    |[39m                                    [31m[1m^[22m[39m
     [90m 94 |[39m       
     [90m 95 |[39m       expect(result[33m.[39mcurrent[33m.[39mselectedProviderKey)[33m.[39mtoBe([32m'gemini'[39m)[33m;[39m
     [90m 96 |[39m       expect(result[33m.[39mcurrent[33m.[39mcurrentProviderConfig)[33m.[39mtoBeDefined()[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:293:7)
      at Object.<anonymous> (src/__tests__/integration/aiService.integration.test.js:93:36)

    console.log
      [AI-1762206464832] Starting analysis: executive_summary with provider: invalid-provider

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.error
      [AI-1762206464832] Provider configuration error: Provedor AI n√£o configurado ou inv√°lido: invalid-provider

    [0m [90m 73 |[39m     [36mif[39m ([33m![39mcurrentProviderConfig) {
     [90m 74 |[39m       [36mconst[39m err [33m=[39m [36mnew[39m [33mError[39m([32m`Provedor AI n√£o configurado ou inv√°lido: ${selectedProviderKey}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 75 |[39m       console[33m.[39merror([32m`[${callId}] Provider configuration error:`[39m[33m,[39m err[33m.[39mmessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 76 |[39m       setError(err)[33m;[39m [90m// Set Error object[39m
     [90m 77 |[39m       [36mthrow[39m err[33m;[39m [90m// Re-throw for the caller to also handle if needed[39m
     [90m 78 |[39m     }[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:75:15)
      at src/__tests__/integration/aiService.integration.test.js:116:32
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at src/__tests__/integration/aiService.integration.test.js:115:18
      at Object.toThrow (node_modules/expect/build/index.js:267:58)
      at Object.<anonymous> (src/__tests__/integration/aiService.integration.test.js:121:18)

    console.log
      [AI-1762206464879] Starting analysis: executive_summary with provider: openai

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.warn
      [AI-1762206464879] API key error: Chave API necess√°ria para OpenAI mas n√£o fornecida. Por favor, configure-a na se√ß√£o "Configura√ß√£o de IA".

    [0m [90m 81 |[39m     [36mif[39m (currentProviderConfig[33m.[39mrequiresKey [33m&&[39m ([33m![39mcurrentApiKey [33m||[39m currentApiKey[33m.[39mtrim() [33m===[39m [32m''[39m)) {
     [90m 82 |[39m       [36mconst[39m errMessage [33m=[39m [32m`Chave API necess√°ria para ${currentProviderConfig.name} mas n√£o fornecida. Por favor, configure-a na se√ß√£o "Configura√ß√£o de IA".`[39m[33m;[39m
    [31m[1m>[22m[39m[90m 83 |[39m       console[33m.[39mwarn([32m`[${callId}] API key error:`[39m[33m,[39m errMessage)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 84 |[39m       setError([36mnew[39m [33mError[39m(errMessage))[33m;[39m
     [90m 85 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(errMessage)[33m;[39m [90m// Throw for consistency[39m
     [90m 86 |[39m     }[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:83:15)
      at src/__tests__/integration/aiService.integration.test.js:131:32
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at src/__tests__/integration/aiService.integration.test.js:130:18
      at Object.toThrow (node_modules/expect/build/index.js:267:58)
      at Object.<anonymous> (src/__tests__/integration/aiService.integration.test.js:138:18)

    console.log
      [AI-1762206464882] Starting analysis: executive_summary with provider: ollama

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464882] Iniciando an√°lise: executive_summary com Ollama (Local)

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464882] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464882] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464882] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:146:20

    console.log
      [AI-1762206464887] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464887] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464887] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464887] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464887] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:163:20

    console.log
      [AI-1762206464896] Starting analysis: variance_analysis with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464896] Iniciando an√°lise: variance_analysis com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464896] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464896] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464896] Analysis failed for variance_analysis

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:181:20

    console.log
      [AI-1762206464900] Starting analysis: financial_data_extraction with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464900] Iniciando an√°lise: financial_data_extraction com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464900] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464900] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464900] Analysis failed for financial_data_extraction

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:203:20

    console.log
      [AI-1762206464905] Starting analysis: risk_assessment with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464905] Iniciando an√°lise: risk_assessment com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464905] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464905] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464905] Analysis failed for risk_assessment

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:220:20

    console.log
      [AI-1762206464908] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464908] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.error
      [AI-1762206464908] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:242:11

    console.log
      [AI-1762206464912] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464912] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464912] Raw response type: string

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464912] Raw response preview: Invalid response...

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464912] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:267:11

    console.log
      [AI-1762206464916] Starting analysis: executive_summary with provider: openai

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464916] Iniciando an√°lise: executive_summary com OpenAI

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.error
      [AI-1762206464916] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:290:11

    console.log
      [AI-1762206464920] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464920] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.error
      [AI-1762206464920] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:313:11

    console.log
      [AI-1762206464943] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464943] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464943] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464943] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464943] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:340:9

    console.log
      [AI-1762206464946] Starting analysis: executive_summary with provider: openai

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464946] Iniciando an√°lise: executive_summary com OpenAI

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464946] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464946] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464946] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:361:9

    console.log
      [AI-1762206464950] Starting analysis: executive_summary with provider: openai

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464950] Iniciando an√°lise: executive_summary com OpenAI

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464950] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464950] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464950] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:382:9

    console.log
      [AI-1762206464954] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464954] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464954] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464954] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464954] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:406:9

    console.log
      [AI-1762206464965] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464965] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464965] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464965] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464965] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:433:9

    console.log
      [AI-1762206464968] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464968] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464968] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464968] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464968] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:456:11

    console.log
      [AI-1762206464970] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464970] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464970] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464970] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464970] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:476:20

    console.log
      [AI-1762206464973] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464973] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464973] Raw response type: string

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464973] Raw response preview: {"summary":"Partial analysis"}...

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464973] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:504:20

    console.log
      [AI-1762206464975] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464975] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464975] Starting analysis: variance_analysis with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464975] Iniciando an√°lise: variance_analysis com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464976] Starting analysis: risk_assessment with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464976] Iniciando an√°lise: risk_assessment com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464975] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464975] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464975] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)

    console.log
      [AI-1762206464975] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464975] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464975] Analysis failed for variance_analysis

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)

    console.log
      [AI-1762206464976] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464976] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464976] Analysis failed for risk_assessment

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)

    console.log
      [AI-1762206464980] Starting analysis: executive_summary with provider: gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:71:13)

    console.log
      [AI-1762206464980] Iniciando an√°lise: executive_summary com Google Gemini

      at Object.callAiAnalysis (src/hooks/useAiService.js:90:13)

    console.log
      [AI-1762206464980] Raw response type: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:118:15)

    console.log
      [AI-1762206464980] Raw response preview: undefined

      at Object.callAiAnalysis (src/hooks/useAiService.js:119:15)

    console.error
      [AI-1762206464980] Analysis failed for executive_summary

    [0m [90m 151 |[39m         console[33m.[39merror([32m`[${callId}] ERROR during analysis ${analysisType} with ${currentProviderConfig.name}:`[39m[33m,[39m err)[33m;[39m
     [90m 152 |[39m       } [36melse[39m {
    [31m[1m>[22m[39m[90m 153 |[39m         console[33m.[39merror([32m`[${callId}] Analysis failed for ${analysisType}`[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 154 |[39m       }
     [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:153:17)
      at src/__tests__/integration/aiService.integration.test.js:556:20

  ‚óè AI Service Integration Tests ‚Ä∫ API Key Validation ‚Ä∫ should not require API key for local providers

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:146:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle executive summary analysis

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:163:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle variance analysis

    Falha na an√°lise variance_analysis. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:181:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle financial data extraction from PDF

    Falha na an√°lise financial_data_extraction. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:203:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle risk assessment analysis

    Falha na an√°lise risk_assessment. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:220:20

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should apply temperature settings correctly

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:340:9

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should respect max tokens limit

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:361:9

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should use provider-specific model when specified

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:382:9

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis History ‚Ä∫ should track analysis history

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:406:9

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis History ‚Ä∫ should provide provider insights

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:433:9

  ‚óè AI Service Integration Tests ‚Ä∫ Multi-Provider Support ‚Ä∫ should format requests correctly for different providers

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:456:11

  ‚óè AI Service Integration Tests ‚Ä∫ Response Validation ‚Ä∫ should validate and standardize AI responses

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:476:20

  ‚óè AI Service Integration Tests ‚Ä∫ Response Validation ‚Ä∫ should handle responses with missing fields

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:504:20

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise variance_analysis. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise risk_assessment. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle large financial datasets

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:556:20

FAIL src/__tests__/utils/testUtils.js
  ‚óè Test suite failed to run

    Cannot find module 'react-router-dom' from 'src/__tests__/utils/testUtils.js'

    [0m [90m  6 |[39m [36mimport[39m [33mReact[39m [36mfrom[39m [32m'react'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { render } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m [36mimport[39m { [33mBrowserRouter[39m } [36mfrom[39m [32m'react-router-dom'[39m[33m;[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [90m/**[39m
     [90m 11 |[39m [90m * Custom render function that wraps components with necessary providers[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/__tests__/utils/testUtils.js:8:1)

FAIL src/utils/__tests__/calculations.test.js (6.308 s)
  ‚óè Financial Calculations Engine ‚Ä∫ calculateIncomeStatement ‚Ä∫ should calculate income statement with all provided values

    expect(received).toEqual(expected) // deep equality

    - Expected  -  3
    + Received  + 78

      Object {
    +   "auditTrail": Object {
    +     "calculationSteps": Array [
    +       Object {
    +         "formula": "data.revenue",
    +         "step": "revenue",
    +         "value": 1000000,
    +       },
    +       Object {
    +         "formula": "data.cogs",
    +         "source": "input",
    +         "step": "cogs",
    +         "value": 600000,
    +       },
    +       Object {
    +         "formula": "revenue - cogs = 1000000 - 600000",
    +         "metric": "grossProfit",
    +         "value": 400000,
    +       },
    +       Object {
    +         "formula": "(grossProfit / revenue) * 100 = (400000 / 1000000) * 100",
    +         "metric": "grossMarginPercent",
    +         "value": 40,
    +       },
    +       Object {
    +         "formula": "grossProfit - operatingExpenses = 400000 - 200000",
    +         "metric": "ebitda",
    +         "source": "calculated",
    +         "value": 200000,
    +       },
    +       Object {
    +         "formula": "ebitda - depreciation = 200000 - 50000",
    +         "metric": "ebit",
    +         "value": 150000,
    +       },
    +       Object {
    +         "formula": "ebit + netFinancialResult = 150000 + -20000",
    +         "metric": "ebt",
    +         "value": 130000,
    +       },
    +       Object {
    +         "detail": "IRPJ: 19500 base + 0 surtax",
    +         "formula": "IRPJ (19500) + CSLL (11700)",
    +         "metric": "taxes",
    +         "value": 31200,
    +       },
    +       Object {
    +         "formula": "ebt - taxes = 130000 - 31200",
    +         "metric": "netIncome",
    +         "value": 98800,
    +       },
    +     ],
    +     "originalValues": Object {
    +       "cogs": 600000,
    +       "depreciation": 50000,
    +       "financialExpenses": 30000,
    +       "financialRevenue": 10000,
    +       "operatingExpenses": 200000,
    +       "revenue": 1000000,
    +     },
    +     "overrides": null,
    +     "system": "EnterpriseCashFlow",
    +     "timestamp": "2025-11-03T21:47:45.408Z",
    +     "validationResults": Object {
    +       "errors": Array [],
    +       "warnings": Array [],
    +     },
    +     "version": "1.0",
    +   },
        "cogs": 600000,
        "depreciation": 50000,
        "ebit": 150000,
        "ebitMargin": 15,
        "ebitda": 200000,
        "ebitdaMargin": 20,
        "ebt": 130000,
    +   "effectiveTaxRate": 24,
        "grossMarginPercent": 40,
        "grossProfit": 400000,
        "netFinancialResult": -20000,
    -   "netIncome": 85800,
    -   "netMargin": 8.58,
    +   "netIncome": 98800,
    +   "netMargin": 9.88,
        "operatingExpenses": 200000,
        "revenue": 1000000,
    -   "taxes": 44200,
    +   "taxBreakdown": Object {
    +     "csll": 11700,
    +     "irpj": 19500,
    +     "irpjBase": 19500,
    +     "irpjSurtax": 0,
    +   },
    +   "taxes": 31200,
      }

    [0m [90m 25 |[39m       [36mconst[39m result [33m=[39m calculateIncomeStatement(input)[33m;[39m
     [90m 26 |[39m
    [31m[1m>[22m[39m[90m 27 |[39m       expect(result)[33m.[39mtoEqual({
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 28 |[39m         revenue[33m:[39m [35m1000000[39m[33m,[39m
     [90m 29 |[39m         cogs[33m:[39m [35m600000[39m[33m,[39m
     [90m 30 |[39m         grossProfit[33m:[39m [35m400000[39m[33m,[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:27:22)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateCashFlow ‚Ä∫ should handle first period without previous data

    expect(received).toBe(expected) // Object.is equality

    Expected: 120000
    Received: -50000

    [0m [90m 136 |[39m       [36mconst[39m result [33m=[39m calculateCashFlow(currentPeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 137 |[39m
    [31m[1m>[22m[39m[90m 138 |[39m       expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// Net income + depreciation[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 139 |[39m       expect(result[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:138:40)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateBalanceSheet ‚Ä∫ should estimate balance sheet components

    expect(received).toBe(expected) // Object.is equality

    Expected: 130000
    Received: 150000

    [0m [90m 359 |[39m       expect(result[33m.[39mnonCurrentAssets)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 360 |[39m       expect(result[33m.[39mtotalAssets)[33m.[39mtoBe(result[33m.[39mcurrentAssets [33m+[39m result[33m.[39mnonCurrentAssets)[33m;[39m
    [31m[1m>[22m[39m[90m 361 |[39m       expect(result[33m.[39mcurrentLiabilities)[33m.[39mtoBe([35m130000[39m)[33m;[39m [90m// AP (80000) + Short-term debt (50000)[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 362 |[39m       expect(result[33m.[39mtotalLiabilitiesEquity)[33m.[39mtoBe(result[33m.[39mtotalAssets)[33m;[39m
     [90m 363 |[39m     })[33m;[39m
     [90m 364 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:361:41)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateBalanceSheet ‚Ä∫ should calculate balance sheet check

    expect(received).toBeLessThan(expected)

    Expected: < 0.01
    Received:   NaN

    [0m [90m 367 |[39m
     [90m 368 |[39m       [36mconst[39m balanceCheck [33m=[39m [33mMath[39m[33m.[39mabs(result[33m.[39mtotalAssets [33m-[39m result[33m.[39mtotalLiabilitiesEquity)[33m;[39m
    [31m[1m>[22m[39m[90m 369 |[39m       expect(balanceCheck)[33m.[39mtoBeLessThan([35m0.01[39m)[33m;[39m [90m// Should balance[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 370 |[39m     })[33m;[39m
     [90m 371 |[39m
     [90m 372 |[39m     it([32m'should handle missing data with estimates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:369:28)

FAIL src/__tests__/utils/financialCalculations.comprehensive.test.js (6.344 s)
  ‚óè DEFECT #1: Balance Sheet Estimation - Asset Turnover Approach ‚Ä∫ Asset turnover calculation ‚Ä∫ should use asset turnover ratio instead of revenue * 0.8

    expect(received).toBeCloseTo(expected, precision)

    Expected: 400000
    Received: 452602.74

    Expected precision:    -3
    Expected difference: < 500
    Received difference:   52602.73999999999

    [0m [90m 151 |[39m       [90m// estimatedTotalAssets = 1,000,000 / 2.5 = 400,000[39m
     [90m 152 |[39m       [90m// NOT revenue * 0.8 = 800,000[39m
    [31m[1m>[22m[39m[90m 153 |[39m       expect(balanceSheet[33m.[39mtotalAssets)[33m.[39mtoBeCloseTo([35m400000[39m[33m,[39m [33m-[39m[35m3[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 154 |[39m     })[33m;[39m
     [90m 155 |[39m
     [90m 156 |[39m     test([32m'should calculate fixed assets as 40% of estimated total assets'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:153:40)

  ‚óè DEFECT #1: Balance Sheet Estimation - Asset Turnover Approach ‚Ä∫ Asset turnover calculation ‚Ä∫ should allow custom asset turnover ratio

    expect(received).toBeCloseTo(expected, precision)

    Expected: 200000
    Received: 350000

    Expected precision:    -3
    Expected difference: < 500
    Received difference:   150000

    [0m [90m 188 |[39m
     [90m 189 |[39m       [90m// estimatedTotalAssets = 1,000,000 / 5.0 = 200,000[39m
    [31m[1m>[22m[39m[90m 190 |[39m       expect(balanceSheet[33m.[39mtotalAssets)[33m.[39mtoBeCloseTo([35m200000[39m[33m,[39m [33m-[39m[35m3[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 191 |[39m     })[33m;[39m
     [90m 192 |[39m
     [90m 193 |[39m     test([32m'should validate balance sheet equation A = L + E'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:190:40)

  ‚óè DEFECT #4: Cash Flow Working Capital - First Period Calculation ‚Ä∫ Edge cases ‚Ä∫ should handle zero working capital in first period

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: -0

    [0m [90m 486 |[39m
     [90m 487 |[39m       [36mconst[39m cashFlow [33m=[39m calculateCashFlow(currentPeriod[33m,[39m [36mnull[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 488 |[39m       expect(cashFlow[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m
     [90m 491 |[39m     test([32m'should handle negative working capital change (cash inflow)'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:488:45)

  ‚óè DEFECT #5: Audit Trail System ‚Ä∫ Audit trail creation ‚Ä∫ should track calculation steps

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 546 |[39m
     [90m 547 |[39m       expect(auditTrail[33m.[39mcalculationSteps)[33m.[39mtoBeInstanceOf([33mArray[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 548 |[39m       expect(auditTrail[33m.[39mcalculationSteps[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 549 |[39m     })[33m;[39m
     [90m 550 |[39m
     [90m 551 |[39m     test([32m'should track overrides applied'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:548:50)

FAIL src/utils/__tests__/calculations.comprehensive.test.js (6.379 s)
  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateIncomeStatement ‚Ä∫ Tax calculations ‚Ä∫ should calculate taxes on positive income

    expect(received).toBe(expected) // Object.is equality

    Expected: 95200
    Received: 65200

    [0m [90m 110 |[39m         
     [90m 111 |[39m         expect(result[33m.[39mebt)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 112 |[39m         expect(result[33m.[39mtaxes)[33m.[39mtoBe([33mMath[39m[33m.[39mround(result[33m.[39mebt [33m*[39m [35m0.34[39m [33m*[39m [35m100[39m) [33m/[39m [35m100[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
     [90m 115 |[39m       it([32m'should not apply taxes on negative income'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:112:30)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Operating cash flow calculations ‚Ä∫ should calculate OCF for first period (no WC change)

    expect(received).toBe(expected) // Object.is equality

    Expected: 120000
    Received: -50000

    [0m [90m 205 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(basePeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 206 |[39m         
    [31m[1m>[22m[39m[90m 207 |[39m         expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// NI + Depreciation[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 208 |[39m         expect(result[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 209 |[39m       })[33m;[39m
     [90m 210 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:207:42)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Investing and free cash flow ‚Ä∫ should calculate investing cash flow with provided capex

    expect(received).toBe(expected) // Object.is equality

    Expected: 70000
    Received: -100000

    [0m [90m 250 |[39m         expect(result[33m.[39mcapex)[33m.[39mtoBe([35m50000[39m)[33m;[39m
     [90m 251 |[39m         expect(result[33m.[39minvestingCashFlow)[33m.[39mtoBe([33m-[39m[35m50000[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 252 |[39m         expect(result[33m.[39mfreeCashFlow)[33m.[39mtoBe([35m70000[39m)[33m;[39m [90m// 120k - 50k[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
     [90m 255 |[39m       it([32m'should use default capex rate when not provided'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:252:37)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Financing cash flow ‚Ä∫ should calculate financing cash flow correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 190000
    Received: 20000

    [0m [90m 278 |[39m         
     [90m 279 |[39m         expect(result[33m.[39mfinancingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// 100k + 50k - 30k[39m
    [31m[1m>[22m[39m[90m 280 |[39m         expect(result[33m.[39mnetCashFlow)[33m.[39mtoBe([35m190000[39m)[33m;[39m [90m// 120k - 50k + 120k[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 281 |[39m       })[33m;[39m
     [90m 282 |[39m
     [90m 283 |[39m       it([32m'should handle debt repayment and dividend payments'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:280:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Cash conversion metrics ‚Ä∫ should calculate cash conversion rate correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 120
    Received: -50

    [0m [90m 299 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(basePeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 300 |[39m         
    [31m[1m>[22m[39m[90m 301 |[39m         expect(result[33m.[39mcashConversionRate)[33m.[39mtoBe([35m120[39m)[33m;[39m [90m// (120k / 100k) * 100[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 302 |[39m       })[33m;[39m
     [90m 303 |[39m
     [90m 304 |[39m       it([32m'should handle negative net income'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:301:43)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Cash conversion metrics ‚Ä∫ should handle negative net income

    expect(received).toBe(expected) // Object.is equality

    Expected: -30000
    Received: -200000

    [0m [90m 313 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(lossmaking[33m,[39m [36mnull[39m)[33m;[39m
     [90m 314 |[39m         
    [31m[1m>[22m[39m[90m 315 |[39m         expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([33m-[39m[35m30000[39m)[33m;[39m [90m// -50k + 20k[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 316 |[39m         expect(result[33m.[39mcashConversionRate)[33m.[39mtoBe([35m60[39m)[33m;[39m [90m// (-30k / -50k) * 100[39m
     [90m 317 |[39m       })[33m;[39m
     [90m 318 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:315:42)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateWorkingCapitalMetrics ‚Ä∫ Cash conversion cycle ‚Ä∫ should handle negative CCC (good cash management)

    expect(received).toBeLessThan(expected)

    Expected: < 0
    Received:   16438.35

    [0m [90m 411 |[39m         
     [90m 412 |[39m         expect(result[33m.[39mcashConversionCycle)[33m.[39mtoBe([33m-[39m[35m10[39m)[33m;[39m [90m// 30 + 20 - 60[39m
    [31m[1m>[22m[39m[90m 413 |[39m         expect(result[33m.[39mworkingCapitalValue)[33m.[39mtoBeLessThan([35m0[39m)[33m;[39m [90m// Negative WC is good![39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 414 |[39m       })[33m;[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:413:44)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateWorkingCapitalMetrics ‚Ä∫ Edge cases ‚Ä∫ should handle zero revenue

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 45

    [0m [90m 458 |[39m         
     [90m 459 |[39m         expect(result[33m.[39maccountsReceivableValue)[33m.[39mtoBe([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 460 |[39m         expect(result[33m.[39mdso)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 461 |[39m         expect(result[33m.[39mworkingCapitalValue)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 462 |[39m       })[33m;[39m
     [90m 463 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:460:28)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should estimate cash and current assets

    expect(received).toBe(expected) // Object.is equality

    Expected: 350000
    Received: 370000

    [0m [90m 629 |[39m         expect(result[33m.[39maccountsReceivable)[33m.[39mtoBe([35m150000[39m)[33m;[39m
     [90m 630 |[39m         expect(result[33m.[39minventory)[33m.[39mtoBe([35m100000[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m         expect(result[33m.[39mcurrentAssets)[33m.[39mtoBe([35m350000[39m)[33m;[39m [90m// 100k + 150k + 100k[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 632 |[39m       })[33m;[39m
     [90m 633 |[39m
     [90m 634 |[39m       it([32m'should calculate non-current assets to balance'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:631:38)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should calculate non-current assets to balance

    expect(received).toBe(expected) // Object.is equality

    Expected: 800000
    Received: 530000

    [0m [90m 635 |[39m         [36mconst[39m result [33m=[39m calculateBalanceSheet(baseData)[33m;[39m
     [90m 636 |[39m         
    [31m[1m>[22m[39m[90m 637 |[39m         expect(result[33m.[39mtotalAssets)[33m.[39mtoBe([35m800000[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 638 |[39m         expect(result[33m.[39mnonCurrentAssets)[33m.[39mtoBe([35m450000[39m)[33m;[39m [90m// 800k - 350k[39m
     [90m 639 |[39m       })[33m;[39m
     [90m 640 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:637:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should use revenue-based estimation when total assets not provided

    expect(received).toBe(expected) // Object.is equality

    Expected: 800000
    Received: 530000

    [0m [90m 649 |[39m         [36mconst[39m result [33m=[39m calculateBalanceSheet(data)[33m;[39m
     [90m 650 |[39m         
    [31m[1m>[22m[39m[90m 651 |[39m         expect(result[33m.[39mtotalAssets)[33m.[39mtoBe([35m800000[39m)[33m;[39m [90m// 80% of revenue[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 652 |[39m       })[33m;[39m
     [90m 653 |[39m     })[33m;[39m
     [90m 654 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:651:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Liability calculations ‚Ä∫ should calculate current liabilities

    expect(received).toBe(expected) // Object.is equality

    Expected: 130000
    Received: 150000

    [0m [90m 659 |[39m         expect(result[33m.[39maccountsPayable)[33m.[39mtoBe([35m80000[39m)[33m;[39m
     [90m 660 |[39m         expect(result[33m.[39mshortTermDebt)[33m.[39mtoBe([35m50000[39m)[33m;[39m [90m// 5% of revenue[39m
    [31m[1m>[22m[39m[90m 661 |[39m         expect(result[33m.[39mcurrentLiabilities)[33m.[39mtoBe([35m130000[39m)[33m;[39m [90m// 80k + 50k[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 662 |[39m       })[33m;[39m
     [90m 663 |[39m
     [90m 664 |[39m       it([32m'should balance with appropriate debt/equity ratio'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:661:43)

PASS src/__tests__/setup/testInfrastructure.test.js
FAIL src/components/__tests__/ExcelUploader.test.js (6.62 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 42 |[39m   describe([32m'Rendering'[39m[33m,[39m () [33m=>[39m {
     [90m 43 |[39m     it([32m'should render upload area and instructions'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 44 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 45 |[39m       
     [90m 46 |[39m       expect(screen[33m.[39mgetByText([35m/entrada de dados via excel/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 47 |[39m       expect(screen[33m.[39mgetByText([35m/carregar planilha excel/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:44:13)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should handle file selection via input

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 73 |[39m       })[33m;[39m
     [90m 74 |[39m
    [31m[1m>[22m[39m[90m 75 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 76 |[39m       [36mawait[39m user[33m.[39mupload(input[33m,[39m file)[33m;[39m
     [90m 77 |[39m
     [90m 78 |[39m       expect(defaultProps[33m.[39monFileUpload)[33m.[39mtoHaveBeenCalledWith(file)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:75:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should clear input after file selection

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 87 |[39m       })[33m;[39m
     [90m 88 |[39m
    [31m[1m>[22m[39m[90m 89 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 90 |[39m       [36mawait[39m user[33m.[39mupload(input[33m,[39m file)[33m;[39m
     [90m 91 |[39m
     [90m 92 |[39m       expect(input[33m.[39mvalue)[33m.[39mtoBe([32m''[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:89:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should disable upload when loading

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center opacity-50 cursor-not-allowed"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mdisabled[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m  96 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} isLoading[33m=[39m{[36mtrue[39m} [33m/[39m[33m>[39m)[33m;[39m
     [90m  97 |[39m       
    [31m[1m>[22m[39m[90m  98 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m  99 |[39m       expect(input)[33m.[39mtoBeDisabled()[33m;[39m
     [90m 100 |[39m     })[33m;[39m
     [90m 101 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:98:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should disable upload when ExcelJS is loading

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
              [33mdisabled[39m=[32m""[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center opacity-50 cursor-not-allowed"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mdisabled[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 103 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} isExcelJsLoading[33m=[39m{[36mtrue[39m} [33m/[39m[33m>[39m)[33m;[39m
     [90m 104 |[39m       
    [31m[1m>[22m[39m[90m 105 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 106 |[39m       expect(input)[33m.[39mtoBeDisabled()[33m;[39m
     [90m 107 |[39m     })[33m;[39m
     [90m 108 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:105:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should accept Excel file types

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 110 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m 111 |[39m       
    [31m[1m>[22m[39m[90m 112 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 113 |[39m       expect(input)[33m.[39mtoHaveAttribute([32m'accept'[39m[33m,[39m [32m'.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m)[33m;[39m
     [90m 114 |[39m     })[33m;[39m
     [90m 115 |[39m   })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:112:28)

  ‚óè ExcelUploader Component ‚Ä∫ Template Download ‚Ä∫ should disable template download when processing

    expect(element).toBeDisabled()

    Received element is not disabled:
      <button data-testid="template-download-button" />

    [0m [90m 137 |[39m       
     [90m 138 |[39m       [36mconst[39m downloadButton [33m=[39m screen[33m.[39mgetByTestId([32m'template-download-button'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 139 |[39m       expect(downloadButton)[33m.[39mtoBeDisabled()[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m   })[33m;[39m
     [90m 142 |[39m[0m

      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:139:30)

  ‚óè ExcelUploader Component ‚Ä∫ Accessibility ‚Ä∫ should have accessible file input

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 175 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m 176 |[39m       
    [31m[1m>[22m[39m[90m 177 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 178 |[39m       expect(input)[33m.[39mtoHaveAttribute([32m'type'[39m[33m,[39m [32m'file'[39m)[33m;[39m
     [90m 179 |[39m       expect(input)[33m.[39mtoHaveClass([32m'hidden'[39m)[33m;[39m
     [90m 180 |[39m     })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:177:28)

FAIL src/components/__tests__/Charts.test.js
  ‚óè Test suite failed to run

    Cannot find module '../Charts' from 'src/components/__tests__/Charts.test.js'

    [0m [90m  7 |[39m [36mimport[39m { render[33m,[39m screen[33m,[39m fireEvent[33m,[39m waitFor } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m userEvent [36mfrom[39m [32m'@testing-library/user-event'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { 
     [90m    |[39m [31m[1m^[22m[39m
     [90m 10 |[39m   [33mCashFlowWaterfallChart[39m[33m,[39m
     [90m 11 |[39m   [33mProfitWaterfallChart[39m[33m,[39m
     [90m 12 |[39m   [33mFundingStructureChart[39m[33m,[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/components/__tests__/Charts.test.js:9:1)

FAIL src/components/__tests__/ManualDataEntry.test.js (7.025 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 32 |[39m   describe([32m'Rendering'[39m[33m,[39m () [33m=>[39m {
     [90m 33 |[39m     it([32m'should render basic component structure'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 34 |[39m       render([33m<[39m[33mManualDataEntry[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 35 |[39m       
     [90m 36 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados - Modo Adaptativo'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 37 |[39m       expect(screen[33m.[39mgetByLabelText([35m/N√∫mero de Per√≠odos/i[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:34:13)

    console.error
      Warning: An update to ManualDataEntry inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at ManualDataEntry (/home/user/EnterpriseCashFlow/src/components/InputPanel/ManualDataEntry.jsx:25:3)

    [0m [90m 40 |[39m
     [90m 41 |[39m   [36mconst[39m toggleOverrideSection [33m=[39m (sectionKey) [33m=>[39m {
    [31m[1m>[22m[39m[90m 42 |[39m     setExpandedOverrides(prev [33m=>[39m ({ [33m...[39mprev[33m,[39m [sectionKey][33m:[39m [33m![39mprev[sectionKey] }))[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 43 |[39m   }[33m;[39m
     [90m 44 |[39m
     [90m 45 |[39m   [36mconst[39m driverFieldKeys [33m=[39m getFieldKeys([[33mFIELD_CATEGORIES[39m[33m.[39m[33mDRIVER_REQUIRED[39m[33m,[39m [33mFIELD_CATEGORIES[39m[33m.[39m[33mDRIVER_OPTIONAL[39m])[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at setExpandedOverrides (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at toggleOverrideSection (src/components/InputPanel/ManualDataEntry.jsx:42:5)
      at onClick (src/components/InputPanel/ManualDataEntry.jsx:104:28)
      at HTMLUnknownElement.callCallback (node_modules/react-dom/cjs/react-dom.development.js:4164:14)
      at HTMLUnknownElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at invokeGuardedCallbackAndCatchFirstError (node_modules/react-dom/cjs/react-dom.development.js:4291:25)
      at executeDispatch (node_modules/react-dom/cjs/react-dom.development.js:9041:3)
      at processDispatchQueueItemsInOrder (node_modules/react-dom/cjs/react-dom.development.js:9073:7)
      at processDispatchQueue (node_modules/react-dom/cjs/react-dom.development.js:9086:5)
      at dispatchEventsForPlugins (node_modules/react-dom/cjs/react-dom.development.js:9097:3)
      at node_modules/react-dom/cjs/react-dom.development.js:9288:12
      at batchedUpdates$1 (node_modules/react-dom/cjs/react-dom.development.js:26179:12)
      at batchedUpdates (node_modules/react-dom/cjs/react-dom.development.js:3991:12)
      at dispatchEventForPluginEventSystem (node_modules/react-dom/cjs/react-dom.development.js:9287:3)
      at dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay (node_modules/react-dom/cjs/react-dom.development.js:6465:5)
      at dispatchEvent (node_modules/react-dom/cjs/react-dom.development.js:6457:5)
      at dispatchDiscreteEvent (node_modules/react-dom/cjs/react-dom.development.js:6430:5)
      at HTMLDivElement.callTheUserObjectsOperation (node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLSpanElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLSpanElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLSpanElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:43
      at Object.eventWrapper (node_modules/@testing-library/dom/dist/config.js:25:23)
      at Object.wrapEvent (node_modules/@testing-library/user-event/dist/cjs/event/wrapEvent.js:6:28)
      at Object.dispatchEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:45:22)
      at Object.dispatchUIEvent (node_modules/@testing-library/user-event/dist/cjs/event/dispatchEvent.js:22:26)
      at Mouse.up (node_modules/@testing-library/user-event/dist/cjs/system/pointer/mouse.js:100:30)
      at PointerHost.release (node_modules/@testing-library/user-event/dist/cjs/system/pointer/index.js:87:24)
      at pointerAction (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:54:47)
      at Object.pointer (node_modules/@testing-library/user-event/dist/cjs/pointer/index.js:27:9)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:128:7)

  ‚óè ManualDataEntry Component ‚Ä∫ User Interactions ‚Ä∫ should handle period type change

    TestingLibraryElementError: Value "QUARTERLY" not found in options

    Ignored nodes: comments, script, style
    [36m<select[39m
      [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
      [33mid[39m=[32m"periodTypeEntry"[39m
    [36m>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"anos"[39m
      [36m>[39m
        [0mAnos[0m
      [36m</option>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"trimestres"[39m
      [36m>[39m
        [0mTrimestres[0m
      [36m</option>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"meses"[39m
      [36m>[39m
        [0mMeses[0m
      [36m</option>[39m
    [36m</select>[39m

    [0m [90m 73 |[39m       
     [90m 74 |[39m       [36mconst[39m typeSelect [33m=[39m screen[33m.[39mgetByLabelText([35m/Tipo de Per√≠odo/i[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 75 |[39m       [36mawait[39m user[33m.[39mselectOptions(typeSelect[33m,[39m [32m'QUARTERLY'[39m)[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m 76 |[39m       
     [90m 77 |[39m       expect(defaultProps[33m.[39monPeriodTypeChange)[33m.[39mtoHaveBeenCalledWith([32m'QUARTERLY'[39m)[33m;[39m
     [90m 78 |[39m     })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:39:39
          at Array.map (<anonymous>)
      at Object.selectOptionsBase (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:31:38)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:18:30)
      at node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:45
      at Object.asyncWrapper (node_modules/@testing-library/dom/dist/config.js:23:23)
      at Object.wrapAsync (node_modules/@testing-library/user-event/dist/cjs/setup/wrapAsync.js:8:28)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:26)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:75:18)

  ‚óè ManualDataEntry Component ‚Ä∫ Submit functionality ‚Ä∫ should show loading state

    TestingLibraryElementError: Found multiple elements with the role "button"

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0müîß DRE - Itens de Resultado (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0müîß Balan√ßo Patrimonial (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0müîß Fluxo de Caixa (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"[39m
      [33mdisabled[39m=[32m""[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"animate-spin h-4 w-4 text-white"[39m
          [33mfill[39m=[32m"none"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
          [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
        [36m>[39m
          [36m<circle[39m
            [33mclass[39m=[32m"opacity-25"[39m
            [33mcx[39m=[32m"12"[39m
            [33mcy[39m=[32m"12"[39m
            [33mr[39m=[32m"10"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-width[39m=[32m"4"[39m
          [36m/>[39m
          [36m<path[39m
            [33mclass[39m=[32m"opacity-75"[39m
            [33md[39m=[32m"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"[39m
            [33mfill[39m=[32m"currentColor"[39m
          [36m/>[39m
        [36m</svg>[39m
        [36m<span>[39m
          [0mProcessando...[0m
        [36m</span>[39m
      [36m</div>[39m
    [36m</button>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0müí°[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (üîß)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0müìã Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 108 |[39m       
     [90m 109 |[39m       expect(screen[33m.[39mgetByText([32m'Processando...'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 110 |[39m       expect(screen[33m.[39mgetByRole([32m'button'[39m))[33m.[39mtoBeDisabled()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 111 |[39m     })[33m;[39m
     [90m 112 |[39m   })[33m;[39m
     [90m 113 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:110:21)

  ‚óè ManualDataEntry Component ‚Ä∫ Override sections ‚Ä∫ should render override sections as collapsed by default

    TestingLibraryElementError: Found multiple elements with the text: /Fluxo de Caixa/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0müîß Fluxo de Caixa (Overrides Opcionais)[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0müí°[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (üîß)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0müìã Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 118 |[39m       expect(screen[33m.[39mgetByText([35m/DRE - Itens de Resultado/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 119 |[39m       expect(screen[33m.[39mgetByText([35m/Balan√ßo Patrimonial/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 120 |[39m       expect(screen[33m.[39mgetByText([35m/Fluxo de Caixa/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 121 |[39m     })[33m;[39m
     [90m 122 |[39m
     [90m 123 |[39m     it([32m'should expand override sections when clicked'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByText (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:120:21)

  ‚óè ManualDataEntry Component ‚Ä∫ Override sections ‚Ä∫ should expand override sections when clicked

    TestingLibraryElementError: Found multiple elements with the text: /Override/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mValores inseridos nos campos de **Override (üîß)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0müîß DRE - Itens de Resultado (Overrides Opcionais)[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<th[39m
      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
    [36m>[39m
      [0müîß Item Financeiro (Override)[0m
    [36m</th>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß CPV/CSV (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß Lucro Bruto (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß EBITDA (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß EBIT (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß LAIR/PBT (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß Imposto de Renda (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0müîß Lucro L√≠quido (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0müîß Balan√ßo Patrimonial (Overrides Opcionais)[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0müîß Fluxo de Caixa (Overrides Opcionais)[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0müí°[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (üîß)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0müìã Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 129 |[39m       
     [90m 130 |[39m       [90m// Section should expand and show additional content[39m
    [31m[1m>[22m[39m[90m 131 |[39m       expect(screen[33m.[39mgetByText([35m/Override/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 132 |[39m     })[33m;[39m
     [90m 133 |[39m   })[33m;[39m
     [90m 134 |[39m })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByText (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:131:21)

PASS src/__tests__/performance/benchmarks.test.js (7.693 s)
  ‚óè Console

    console.log
      Income Statement Calculation Performance: {
        avg: 0.02382735999997749,
        min: 0.01816099999996368,
        max: 0.1744939999998678,
        p50: 0.0191209999993589,
        p95: 0.04208199999993667,
        p99: 0.1744939999998678
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:62:15)

    console.log
      Cash Flow Calculation Performance: {
        avg: 0.008395099999970625,
        min: 0.006706999999551044,
        max: 0.057943999999224616,
        p50: 0.0070279999999911524,
        p95: 0.014899999999215652,
        p99: 0.057943999999224616
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:96:15)

    console.log
      Multi-Period Processing Performance (12 periods): {
        avg: 0.7278248599999187,
        min: 0.6133150000005116,
        max: 3.2216520000001765,
        p50: 0.6663170000001628,
        p95: 1.0180149999996502,
        p99: 3.2216520000001765
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:109:15)

    console.log
      Processing 100 periods took 5.96ms

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:124:15)

    console.log
      Financial Ratios Calculation Performance: {
        avg: 0.014801089999991746,
        min: 0.012701999999990221,
        max: 0.03206999999929394,
        p50: 0.01320800000030431,
        p95: 0.024078000000372413,
        p99: 0.03206999999929394
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:152:15)

    console.log
      Financial Data Validation Performance: {
        avg: 0.02812804999997752,
        min: 0.02689500000087719,
        max: 0.04826000000048225,
        p50: 0.02726299999994808,
        p95: 0.03474900000037451,
        p99: 0.04826000000048225
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:181:15)

    console.log
      All Validations Performance: {
        avg: 0.5756779299999379,
        min: 0.5041590000000724,
        max: 0.8497489999999743,
        p50: 0.5676659999999174,
        p95: 0.6337579999999434,
        p99: 0.8497489999999743
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:209:15)

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 246 |[39m       }[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       [36mconst[39m { result } [33m=[39m renderHook(() [33m=>[39m useExcelParser(mockExcelJS))[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 249 |[39m       
     [90m 250 |[39m       [36mconst[39m buffer [33m=[39m [36mnew[39m [33mArrayBuffer[39m([35m1024[39m)[33m;[39m
     [90m 251 |[39m       [0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:293:7)
      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:248:36)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:281:5)

    [0m [90m 23 |[39m [90m   */[39m
     [90m 24 |[39m   [36mconst[39m parseExcelData [33m=[39m useCallback([36masync[39m (buffer) [33m=>[39m {
    [31m[1m>[22m[39m[90m 25 |[39m     setIsParsing([36mtrue[39m)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 26 |[39m     setParsingError([36mnull[39m)[33m;[39m
     [90m 27 |[39m     
     [90m 28 |[39m     [36mtry[39m {[0m

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at setIsParsing (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.parseExcelData (src/hooks/useExcelParser.js:25:5)
      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:253:28)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:281:5)

    [0m [90m 24 |[39m   [36mconst[39m parseExcelData [33m=[39m useCallback([36masync[39m (buffer) [33m=>[39m {
     [90m 25 |[39m     setIsParsing([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 26 |[39m     setParsingError([36mnull[39m)[33m;[39m
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 27 |[39m     
     [90m 28 |[39m     [36mtry[39m {
     [90m 29 |[39m       [36mlet[39m workbook[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at setParsingError (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.parseExcelData (src/hooks/useExcelParser.js:26:5)
      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:253:28)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:281:5)

    [0m [90m 73 |[39m       [36mreturn[39m periodsData[33m;[39m
     [90m 74 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 75 |[39m       setParsingError(error[33m.[39mmessage)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 76 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m 77 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
     [90m 78 |[39m     }[0m

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at setParsingError (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.parseExcelData (src/hooks/useExcelParser.js:75:7)
      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:253:7)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:281:5)

    [0m [90m 74 |[39m     } [36mcatch[39m (error) {
     [90m 75 |[39m       setParsingError(error[33m.[39mmessage)[33m;[39m
    [31m[1m>[22m[39m[90m 76 |[39m       setIsParsing([36mfalse[39m)[33m;[39m
     [90m    |[39m       [31m[1m^[22m[39m
     [90m 77 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
     [90m 78 |[39m     }
     [90m 79 |[39m   }[33m,[39m [excelJS])[33m;[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at setIsParsing (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at Object.parseExcelData (src/hooks/useExcelParser.js:76:7)
      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:253:7)

    console.log
      Excel parsing (100 rows) took 27.08ms

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:257:15)

    console.log
      Memory profiling not available in this environment

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:266:17)

    console.log
      Concurrent processing of 10 datasets took 9.77ms

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:314:15)

    console.log
      Performance Profile: {
        incomeStatement: {
          avg: 0.015300066000000697,
          min: 0.012764999999490101,
          max: 0.08618500000011409,
          p50: 0.01347899999927904,
          p95: 0.024215999999796622,
          p99: 0.03728399999999965
        },
        cashFlow: {
          avg: 0.004896464000011292,
          min: 0.004415999999764608,
          max: 0.042018000000098255,
          p50: 0.004567999999380845,
          p95: 0.0058470000003580935,
          p99: 0.009380000000419386
        },
        workingCapital: {
          avg: 0.0074858940000031,
          min: 0.006827000000157568,
          max: 0.022031999999853724,
          p50: 0.0070729999997638515,
          p95: 0.009344999999484571,
          p99: 0.013007999999899766
        },
        ratios: [],
        validation: []
      }

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:353:15)

    console.log
      SME quarterly processing + validation took 0.44ms

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:380:15)

    console.log
      Enterprise monthly processing (24 months) + validation took 1.88ms

      at Object.<anonymous> (src/__tests__/performance/benchmarks.test.js:406:15)

FAIL src/__tests__/integration/phase2-components.integration.test.js (9.608 s)
  ‚óè Console

    console.error
      Warning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`. Import `act` from `react` instead of `react-dom/test-utils`. See https://react.dev/warnings/react-dom-test-utils for more info.

    [0m [90m 120 |[39m   describe([32m'Grid System Integration'[39m[33m,[39m () [33m=>[39m {
     [90m 121 |[39m     test([32m'Grid renders with responsive breakpoints'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 122 |[39m       render(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 123 |[39m         [33m<[39m[33mGrid[39m container spacing[33m=[39m{[35m4[39m}[33m>[39m
     [90m 124 |[39m           [33m<[39m[33mGrid[39m item xs[33m=[39m{[35m12[39m} md[33m=[39m{[35m6[39m}[33m>[39m
     [90m 125 |[39m             [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"grid-item-1"[39m[33m>[39m[33mContent[39m [35m1[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m[0m

      at printWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:71:30)
      at error (node_modules/react-dom/cjs/react-dom-test-utils.development.js:45:7)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1736:7)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:122:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:327:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:327:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 325 |[39m   describe([32m'ReportGeneratorApp Integration'[39m[33m,[39m () [33m=>[39m {
     [90m 326 |[39m     test([32m'App renders without crashing'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 327 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 328 |[39m       
     [90m 329 |[39m       expect(screen[33m.[39mgetByText([32m'Auditor Financeiro com IA ‚ú®'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 330 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:327:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:327:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:327:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 325 |[39m   describe([32m'ReportGeneratorApp Integration'[39m[33m,[39m () [33m=>[39m {
     [90m 326 |[39m     test([32m'App renders without crashing'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 327 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 328 |[39m       
     [90m 329 |[39m       expect(screen[33m.[39mgetByText([32m'Auditor Financeiro com IA ‚ú®'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 330 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:327:13)

    console.error
      The above error occurred in the <ReportGeneratorApp> component:
      
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:32:49)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

    [0m [90m 325 |[39m   describe([32m'ReportGeneratorApp Integration'[39m[33m,[39m () [33m=>[39m {
     [90m 326 |[39m     test([32m'App renders without crashing'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 327 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 328 |[39m       
     [90m 329 |[39m       expect(screen[33m.[39mgetByText([32m'Auditor Financeiro com IA ‚ú®'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 330 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:327:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:334:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:334:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 332 |[39m
     [90m 333 |[39m     test([32m'App switches between input methods correctly'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 334 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 335 |[39m       
     [90m 336 |[39m       [90m// Test manual input method (default)[39m
     [90m 337 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados - Modo Adaptativo'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:334:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:334:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:334:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 332 |[39m
     [90m 333 |[39m     test([32m'App switches between input methods correctly'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 334 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 335 |[39m       
     [90m 336 |[39m       [90m// Test manual input method (default)[39m
     [90m 337 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados - Modo Adaptativo'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:334:13)

    console.error
      The above error occurred in the <ReportGeneratorApp> component:
      
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:32:49)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

    [0m [90m 332 |[39m
     [90m 333 |[39m     test([32m'App switches between input methods correctly'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 334 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 335 |[39m       
     [90m 336 |[39m       [90m// Test manual input method (default)[39m
     [90m 337 |[39m       expect(screen[33m.[39mgetByText([32m'Entrada Manual de Dados - Modo Adaptativo'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m[0m

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:334:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:349:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25777:74)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:349:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 347 |[39m
     [90m 348 |[39m     test([32m'App maintains state consistency across method switches'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 349 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 350 |[39m       
     [90m 351 |[39m       [90m// Set company name[39m
     [90m 352 |[39m       [36mconst[39m companyInput [33m=[39m screen[33m.[39mgetByDisplayValue([32m'Empresa Exemplo S.A.'[39m)[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25777:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:349:13)

    console.error
      Error: Uncaught [Error: useStorage must be used within StorageProvider]
          at reportException (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:349:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12) Error: useStorage must be used within StorageProvider
          at useStorage (/home/user/EnterpriseCashFlow/src/context/StorageContext.jsx:19:11)
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:120:92)
          at renderWithHooks (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
          at mountIndeterminateComponent (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
          at beginWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
          at HTMLUnknownElement.callCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
          at HTMLUnknownElement.callTheUserObjectsOperation (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
          at innerInvokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:338:25)
          at invokeEventListeners (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
          at HTMLUnknownElementImpl._dispatch (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
          at HTMLUnknownElementImpl.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
          at HTMLUnknownElement.dispatchEvent (/home/user/EnterpriseCashFlow/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
          at Object.invokeGuardedCallbackDev (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
          at invokeGuardedCallback (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
          at beginWork$1 (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
          at performUnitOfWork (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26599:12)
          at workLoopSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26505:5)
          at renderRootSync (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:26473:7)
          at recoverFromConcurrentError (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25889:20)
          at performConcurrentWorkOnRoot (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom.development.js:25789:22)
          at flushActQueue (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2667:24)
          at act (/home/user/EnterpriseCashFlow/node_modules/react/cjs/react.development.js:2582:11)
          at actWithWarning (/home/user/EnterpriseCashFlow/node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
          at /home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/act-compat.js:63:25
          at renderRoot (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:159:26)
          at render (/home/user/EnterpriseCashFlow/node_modules/@testing-library/react/dist/pure.js:246:10)
          at Object.<anonymous> (/home/user/EnterpriseCashFlow/src/__tests__/integration/phase2-components.integration.test.js:349:13)
          at Promise.then.completed (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:391:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/utils.js:316:10)
          at _callCircusTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:218:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:155:3)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:66:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at _runTestsForDescribeBlock (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:60:9)
          at run (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/run.js:25:3)
          at runAndTransformResultsToJestFormat (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:170:21)
          at jestAdapter (/home/user/EnterpriseCashFlow/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:82:19)
          at runTestInternal (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:389:16)
          at runTest (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/runTest.js:475:34)
          at Object.worker (/home/user/EnterpriseCashFlow/node_modules/jest-runner/build/testWorker.js:133:12)

    [0m [90m 347 |[39m
     [90m 348 |[39m     test([32m'App maintains state consistency across method switches'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 349 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 350 |[39m       
     [90m 351 |[39m       [90m// Set company name[39m
     [90m 352 |[39m       [36mconst[39m companyInput [33m=[39m screen[33m.[39mgetByDisplayValue([32m'Empresa Exemplo S.A.'[39m)[33m;[39m[0m

      at VirtualConsole.<anonymous> (node_modules/jsdom/lib/jsdom/virtual-console.js:29:45)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:341:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:274:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:221:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:94:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:231:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:349:13)

    console.error
      The above error occurred in the <ReportGeneratorApp> component:
      
          at ReportGeneratorApp (/home/user/EnterpriseCashFlow/src/components/ReportGeneratorApp.jsx:32:49)
      
      Consider adding an error boundary to your tree to customize error handling behavior.
      Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

    [0m [90m 347 |[39m
     [90m 348 |[39m     test([32m'App maintains state consistency across method switches'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 349 |[39m       render([33m<[39m[33mReportGeneratorApp[39m [33m/[39m[33m>[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 350 |[39m       
     [90m 351 |[39m       [90m// Set company name[39m
     [90m 352 |[39m       [36mconst[39m companyInput [33m=[39m screen[33m.[39mgetByDisplayValue([32m'Empresa Exemplo S.A.'[39m)[33m;[39m[0m

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at update.callback (node_modules/react-dom/cjs/react-dom.development.js:18737:5)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23430:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at finishConcurrentRender (node_modules/react-dom/cjs/react-dom.development.js:25931:9)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25848:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:349:13)

  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App renders without crashing

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:327:13)

  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App switches between input methods correctly

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:334:13)

  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App maintains state consistency across method switches

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:349:13)

---------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------
File                                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                            
---------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------
All files                              |   12.42 |    11.49 |    8.77 |   12.89 |                                                                              
 src                                   |       0 |      100 |     100 |       0 |                                                                              
  index.js                             |       0 |      100 |     100 |       0 | 7-8                                                                          
 src/components                        |   12.66 |    19.71 |    1.14 |    14.5 |                                                                              
  App.jsx                              |       0 |        0 |       0 |       0 | 12-174                                                                       
  ErrorBoundary.jsx                    |       0 |        0 |       0 |       0 | 6-96                                                                         
  ExcelUploader.jsx                    |       0 |        0 |       0 |       0 | 11-73                                                                        
  ReportGeneratorApp.jsx               |   18.68 |    27.18 |    1.92 |    21.5 | 108,123-527                                                                  
  SessionRecovery.jsx                  |    4.34 |        0 |       0 |    5.55 | 18-44                                                                        
 src/components/AIPanel                |       0 |        0 |       0 |       0 |                                                                              
  AIPanel.jsx                          |       0 |        0 |       0 |       0 | 20-36                                                                        
  AiAnalysisSection.jsx                |       0 |        0 |       0 |       0 | 5-164                                                                        
  AiSummarySection.jsx                 |       0 |        0 |       0 |       0 | 15-28                                                                        
  AiVarianceSection.jsx                |       0 |        0 |       0 |       0 | 16-28                                                                        
  EnhancedAIPanel.jsx                  |       0 |        0 |       0 |       0 | 11-328                                                                       
 src/components/Charts                 |       0 |        0 |       0 |       0 |                                                                              
  AssetCompositionChart.jsx            |       0 |        0 |       0 |       0 | 7-69                                                                         
  BalanceSheetDifferenceTrendChart.jsx |       0 |        0 |       0 |       0 | 8-74                                                                         
  BaseChart.jsx                        |       0 |        0 |       0 |       0 | 21-104                                                                       
  CashFlowComponentsChart.jsx          |       0 |        0 |       0 |       0 | 8-71                                                                         
  CashFlowKeyMetricsTrendChart.jsx     |       0 |        0 |       0 |       0 | 8-69                                                                         
  FundingStructureChart.jsx            |       0 |        0 |       0 |       0 | 7-68                                                                         
  MarginTrendChart.jsx                 |       0 |        0 |       0 |       0 | 8-67                                                                         
  PnlVisualChart.jsx                   |       0 |        0 |       0 |       0 | 7-88                                                                         
  RechartsWrapper.jsx                  |       0 |        0 |       0 |       0 | 40-67                                                                        
  WorkingCapitalDaysTrendChart.jsx     |       0 |        0 |       0 |       0 | 9-70                                                                         
 src/components/Debug                  |      12 |        0 |       0 |   13.33 |                                                                              
  DataConsistencyMonitor.jsx           |      12 |        0 |       0 |   13.33 | 6-8,12-24,34-36,65-71,91-131,144-259                                         
 src/components/ExportPanel            |       0 |        0 |       0 |       0 |                                                                              
  ExportPanel.jsx                      |       0 |        0 |       0 |       0 | 11-329                                                                       
 src/components/FinancialCalculator    |       0 |        0 |       0 |       0 |                                                                              
  FinancialCalculatorExample.jsx       |       0 |        0 |       0 |       0 | 29-332                                                                       
 src/components/InputPanel             |   33.05 |    29.86 |   34.61 |   35.77 |                                                                              
  AiProviderSelector.jsx               |       0 |        0 |       0 |       0 | 21-93                                                                        
  ExcelTemplateSelector.jsx            |       0 |        0 |       0 |       0 | 19-66                                                                        
  ExcelUploadProgress.jsx              |       0 |        0 |       0 |       0 | 22-94                                                                        
  ExcelUploader.jsx                    |   44.44 |    66.66 |      50 |   44.44 | 29-34                                                                        
  InputMethodSelector.jsx              |       0 |        0 |       0 |       0 | 24-65                                                                        
  ManualDataEntry.jsx                  |      90 |    84.05 |   89.47 |   97.22 | 196                                                                          
  PdfUploader.jsx                      |       0 |        0 |       0 |       0 | 27-112                                                                       
  PeriodTypeConfirmation.jsx           |       0 |        0 |       0 |       0 | 21-60                                                                        
 src/components/Monitoring             |       0 |        0 |       0 |       0 |                                                                              
  MonitoringDashboard.jsx              |       0 |        0 |       0 |       0 | 10-228                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
 src/components/ReportPanel            |    0.97 |        0 |       0 |    1.15 |                                                                              
  BalanceSheetEquation.jsx             |    9.67 |        0 |       0 |    9.67 | 7,16-41,55-90                                                                
  ExecutiveSummaryCards.jsx            |       0 |        0 |       0 |       0 | 12-200                                                                       
  FinancialTables.jsx                  |       0 |        0 |       0 |       0 | 15-221                                                                       
  FundingReconciliation.jsx            |       0 |        0 |       0 |       0 | 12-58                                                                        
  KpiCards.jsx                         |       0 |        0 |       0 |       0 | 11-61                                                                        
  PowerOfOneAnalysis.jsx               |       0 |        0 |       0 |       0 | 14-147                                                                       
  ReportControls.jsx                   |       0 |        0 |       0 |       0 | 36-136                                                                       
  ReportRenderer.jsx                   |       0 |        0 |       0 |       0 | 41-254                                                                       
 src/components/ReportPanel/Charts     |       0 |        0 |       0 |       0 |                                                                              
  CashFlowWaterfallChart.jsx           |       0 |        0 |       0 |       0 | 8-108                                                                        
  FundingStructureChart.jsx            |       0 |        0 |       0 |       0 | 8-85                                                                         
  PnlWaterfallChart.jsx                |       0 |        0 |       0 |       0 | 8-84                                                                         
  ProfitWaterfallChart.jsx             |       0 |        0 |       0 |       0 | 8-89                                                                         
  WorkingCapitalTimeline.jsx           |       0 |        0 |       0 |       0 | 21-74                                                                        
 src/components/Security               |       0 |        0 |       0 |       0 |                                                                              
  ApiKeyConfiguration.jsx              |       0 |        0 |       0 |       0 | 12-286                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
 src/components/composite              |   71.42 |    58.92 |   57.89 |   77.77 |                                                                              
  Form.jsx                             |   71.42 |    58.92 |   57.89 |   77.77 | 36,42-48,66-68,77,156,184,191,221                                            
 src/components/demo                   |       0 |        0 |       0 |       0 |                                                                              
  DesignSystemDemo.jsx                 |       0 |        0 |       0 |       0 | 20-422                                                                       
 src/components/layout                 |   45.83 |    33.33 |   19.04 |   42.42 |                                                                              
  Grid.jsx                             |   45.83 |    33.33 |   19.04 |   42.42 | 217-288,357-422,480-496                                                      
 src/components/ui                     |       0 |        0 |       0 |       0 |                                                                              
  Button.jsx                           |       0 |        0 |       0 |       0 | 14-319                                                                       
  FormField.jsx                        |       0 |        0 |       0 |       0 | 28-341                                                                       
  Input.jsx                            |       0 |        0 |       0 |       0 | 36-364                                                                       
 src/context                           |    7.31 |     3.03 |    5.55 |     7.5 |                                                                              
  StorageContext.jsx                   |    7.31 |     3.03 |    5.55 |     7.5 | 21,29-229                                                                    
 src/design-system                     |      20 |        0 |       0 |      20 |                                                                              
  tokens.js                            |      20 |        0 |       0 |      20 | 303-332,337-344,348,352-353,357                                              
 src/hooks                             |   11.84 |    14.72 |    8.36 |   12.08 |                                                                              
  useAccessibility.js                  |       0 |        0 |       0 |       0 | 21-428                                                                       
  useAiAnalysis.js                     |       0 |        0 |       0 |       0 | 16-105                                                                       
  useAiDataExtraction.js               |       0 |        0 |       0 |       0 | 17-141                                                                       
  useAiDocumentExtraction.js           |       0 |        0 |       0 |       0 | 13-313                                                                       
  useAiService.js                      |      75 |    74.46 |   41.66 |    80.3 | 104-105,130,134-146,151,174-178                                              
  useEnhancedAiService.js              |       0 |        0 |       0 |       0 | 13-344                                                                       
  useExcelParser.js                    |   77.86 |    62.93 |     100 |   78.76 | 49,72-73,104,160-162,205,211,224,311-342                                     
  useExportService.js                  |       0 |        0 |       0 |       0 | 11-215                                                                       
  useFinancialCalculations.js          |       0 |        0 |       0 |       0 | 8-313                                                                        
  useFinancialCalculator.js            |       0 |      100 |       0 |       0 | 6-23                                                                         
  useGeminiApi.js                      |       0 |        0 |       0 |       0 | 7-145                                                                        
  useLibrary.js                        |       0 |        0 |       0 |       0 | 5-66                                                                         
  usePdfParser.js                      |   76.59 |    42.85 |     100 |      75 | 66-94                                                                        
  useSecureFinancialData.js            |       0 |        0 |       0 |       0 | 14-352                                                                       
  useSmartExcelParser.js               |       0 |        0 |       0 |       0 | 35-388                                                                       
  useStorage.js                        |       0 |        0 |       0 |       0 | 14-366                                                                       
 src/services                          |       0 |        0 |       0 |       0 |                                                                              
  index.js                             |       0 |        0 |       0 |       0 | 44-94                                                                        
 src/services/ai                       |       0 |        0 |       0 |       0 |                                                                              
  AIService.js                         |       0 |        0 |       0 |       0 | 12-387                                                                       
  DocumentExtractor.js                 |       0 |        0 |       0 |       0 | 11-364                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
  types.js                             |       0 |      100 |     100 |       0 | 65-90                                                                        
 src/services/ai/providers             |       0 |        0 |       0 |       0 |                                                                              
  AIProviderFactory.js                 |       0 |        0 |       0 |       0 | 9-65                                                                         
  BaseProvider.js                      |       0 |        0 |       0 |       0 | 9-160                                                                        
  ClaudeProvider.js                    |       0 |        0 |       0 |       0 | 7-206                                                                        
  GeminiProvider.js                    |       0 |        0 |       0 |       0 | 7-238                                                                        
  OllamaProvider.js                    |       0 |        0 |       0 |       0 | 6-201                                                                        
  OpenAIProvider.js                    |       0 |        0 |       0 |       0 | 7-207                                                                        
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
 src/services/ai/templates             |       0 |        0 |       0 |       0 |                                                                              
  PromptTemplates.js                   |       0 |        0 |       0 |       0 | 10-363                                                                       
 src/services/ai/utils                 |       0 |        0 |       0 |       0 |                                                                              
  ResponseParser.js                    |       0 |        0 |       0 |       0 | 13-358                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
 src/services/export                   |    9.89 |     7.23 |   15.92 |   10.28 |                                                                              
  BaseExportService.js                 |    4.08 |        0 |    7.69 |    4.08 | 40-234                                                                       
  BatchExportService.js                |    2.17 |        0 |    3.44 |    2.27 | 45-499                                                                       
  ExcelExportService.js                |    1.26 |        0 |       4 |    1.37 | 69-650                                                                       
  ExportService.js                     |    60.2 |    48.48 |   60.86 |    60.2 | 44-45,66-70,75,81-82,112-142,173-182,201-210,253,267-273,319,325-335,368,396 
  PDFExportService.js                  |    0.99 |        0 |    4.34 |       1 | 46-542                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
  types.js                             |     100 |      100 |     100 |     100 |                                                                              
 src/services/export/templates         |   20.13 |        6 |   24.48 |   20.58 |                                                                              
  TemplateManager.js                   |    19.7 |     6.12 |   27.27 |   19.84 | 36-42,54,114-148,161,186-451,468-497                                         
  defaultTemplates.js                  |   28.57 |        0 |       0 |      40 | 314,592-601                                                                  
 src/services/export/utils             |    1.42 |     0.96 |      10 |    1.47 |                                                                              
  BrandingManager.js                   |    1.72 |     1.49 |   13.63 |     1.8 | 62-603,624-633,644                                                           
  ChartExporter.js                     |    0.84 |        0 |    5.55 |    0.84 | 28-415                                                                       
 src/services/financial                |       0 |        0 |       0 |       0 |                                                                              
  FinancialCalculationService.js       |       0 |        0 |       0 |       0 | 11-359                                                                       
 src/services/monitoring               |       0 |        0 |       0 |       0 |                                                                              
  auditLogger.js                       |       0 |        0 |       0 |       0 | 10-386                                                                       
  errorTracker.js                      |       0 |        0 |       0 |       0 | 11-230                                                                       
  index.js                             |       0 |        0 |       0 |       0 | 15-153                                                                       
  loggingService.js                    |       0 |        0 |       0 |       0 | 10-191                                                                       
  metricsCollector.js                  |       0 |        0 |       0 |       0 | 8-394                                                                        
  performanceMonitor.js                |       0 |        0 |       0 |       0 | 8-297                                                                        
  securityMonitor.js                   |       0 |        0 |       0 |       0 | 10-583                                                                       
 src/services/security                 |       0 |        0 |       0 |       0 |                                                                              
  apiKeyManager.js                     |       0 |        0 |       0 |       0 | 11-466                                                                       
  dataValidator.js                     |       0 |        0 |       0 |       0 | 10-526                                                                       
  index.js                             |       0 |        0 |       0 |       0 |                                                                              
  securityHeaders.js                   |       0 |        0 |       0 |       0 | 8-374                                                                        
 src/services/storage                  |    2.72 |     4.32 |    2.77 |    2.93 |                                                                              
  AutoSaveService.js                   |       0 |        0 |       0 |       0 | 12-564                                                                       
  DataExportService.js                 |    0.38 |     4.16 |    1.25 |    0.46 | 29-623                                                                       
  DataImportService.js                 |    1.82 |     2.74 |    5.88 |       2 | 35-737                                                                       
  EncryptionService.js                 |    7.29 |    32.43 |       4 |    7.52 | 26-375,403-406                                                               
  IndexedDBService.js                  |    3.26 |     1.88 |    2.85 |    3.44 | 73-535                                                                       
  LocalStorageService.js               |    2.22 |     5.17 |     3.7 |    2.25 | 24-509                                                                       
  StorageManager.js                    |    5.58 |     0.95 |    2.56 |    5.71 | 49-695                                                                       
  StorageService.js                    |   18.18 |    16.66 |    8.33 |   18.18 | 13,29-121,141-144                                                            
  index.js                             |       0 |        0 |       0 |       0 | 21-118                                                                       
 src/services/storage/models           |   13.79 |        0 |       0 |   16.66 |                                                                              
  index.js                             |   13.79 |        0 |       0 |   16.66 | 297-366                                                                      
 src/utils                             |   41.05 |    34.97 |   29.12 |   42.93 |                                                                              
  aiAnalysisTypes.js                   |     100 |      100 |     100 |     100 |                                                                              
  aiPromptEngine.js                    |   56.91 |    32.87 |   58.82 |   59.82 | 153-254,362,471,488-495,504-607                                              
  aiProviders.js                       |    0.93 |        0 |       0 |    1.02 | 39-465,495-553,568-643                                                       
  calculations.js                      |    96.2 |    89.08 |     100 |   96.92 | 158-159,475,548-550,582                                                      
  constants.js                         |     100 |      100 |     100 |     100 |                                                                              
  dataConsistencyValidator.js          |       0 |        0 |       0 |       0 | 23-80                                                                        
  dataValidation.js                    |   78.33 |    56.44 |   67.56 |   79.04 | 154-155,165,272,281-282,294,356-364,469-592                                  
  excelTemplateGenerator.js            |    1.28 |        0 |       0 |    1.48 | 41-282                                                                       
  fieldDefinitions.js                  |   26.66 |     9.85 |   14.28 |   26.74 | 55-56,60,64-67,71-74,78-81,89-149,192-196,201-205,210-211,215-216,220-267    
  financialValidators.js               |       0 |        0 |       0 |       0 | 5-168                                                                        
  formatters.js                        |     100 |    98.01 |     100 |     100 | 47-48                                                                        
  performanceOptimizations.js          |       0 |        0 |       0 |       0 | 11-416                                                                       
 src/workers                           |   42.04 |    17.47 |   63.63 |   39.88 |                                                                              
  financialCalculator.worker.js        |   42.04 |    17.47 |   63.63 |   39.88 | 159-177,182-234,239-414,421-424                                              
---------------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------------
Summary of all failing tests
FAIL src/__tests__/utils/financialFormulas.test.js
  ‚óè Financial Formulas ‚Ä∫ NPV (Net Present Value) ‚Ä∫ should calculate positive NPV for profitable investment

    expect(received).toBeCloseTo(expected, precision)

    Expected: 68618.28
    Received: 68618.02

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   0.2599999999947613

    [0m [90m 20 |[39m       [36mconst[39m result [33m=[39m calculateNPV(cashFlows[33m,[39m discountRate[33m,[39m initialInvestment)[33m;[39m
     [90m 21 |[39m
    [31m[1m>[22m[39m[90m 22 |[39m       expect(result[33m.[39mnpv)[33m.[39mtoBeCloseTo([35m68618.28[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 23 |[39m       expect(result[33m.[39mprofitabilityIndex)[33m.[39mtoBeCloseTo([35m1.14[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 24 |[39m       expect(result[33m.[39mpresentValues)[33m.[39mtoHaveLength([35m5[39m)[33m;[39m
     [90m 25 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:22:26)

  ‚óè Financial Formulas ‚Ä∫ IRR (Internal Rate of Return) ‚Ä∫ should calculate IRR for typical investment

    expect(received).toBeCloseTo(expected, precision)

    Expected: 14.49
    Received: 15.32

    Expected precision:    1
    Expected difference: < 0.05
    Received difference:   0.8300000000000001

    [0m [90m 54 |[39m
     [90m 55 |[39m       expect(result[33m.[39misValid)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 56 |[39m       expect(result[33m.[39mirr)[33m.[39mtoBeCloseTo([35m14.49[39m[33m,[39m [35m1[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 57 |[39m     })[33m;[39m
     [90m 58 |[39m
     [90m 59 |[39m     it([32m'should handle multiple sign changes in cash flows'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:56:26)

  ‚óè Financial Formulas ‚Ä∫ Cash Flow Projections ‚Ä∫ should calculate present values with discount rate

    expect(received).toBeCloseTo(expected, precision)

    Expected: 95324.07
    Received: 95370.37

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   46.29999999998836

    [0m [90m 205 |[39m
     [90m 206 |[39m       expect(result[33m.[39mpresentValues[[35m0[39m])[33m.[39mtoBe([35m100000[39m)[33m;[39m [90m// First period not discounted[39m
    [31m[1m>[22m[39m[90m 207 |[39m       expect(result[33m.[39mpresentValues[[35m1[39m])[33m.[39mtoBeCloseTo([35m95324.07[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 208 |[39m       expect(result[33m.[39mpresentValues[[35m2[39m])[33m.[39mtoBeCloseTo([35m90889.75[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 209 |[39m       expect(result[33m.[39mtotalPV)[33m.[39mtoBeCloseTo([35m286213.82[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m 210 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:207:39)

  ‚óè Financial Formulas ‚Ä∫ Edge Cases and Validation ‚Ä∫ should handle very small discount rates

    expect(received).toBeCloseTo(expected, precision)

    Expected: 49.97
    Received: 49.94

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   0.030000000000001137

    [0m [90m 266 |[39m       [36mconst[39m result [33m=[39m calculateNPV(cashFlows[33m,[39m discountRate[33m,[39m initialInvestment)[33m;[39m
     [90m 267 |[39m
    [31m[1m>[22m[39m[90m 268 |[39m       expect(result[33m.[39mnpv)[33m.[39mtoBeCloseTo([35m49.97[39m[33m,[39m [35m2[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 269 |[39m     })[33m;[39m
     [90m 270 |[39m
     [90m 271 |[39m     it([32m'should handle zero cash flows'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialFormulas.test.js:268:26)

FAIL src/__tests__/workers/financialCalculator.worker.test.js
  ‚óè Financial Calculator Worker ‚Ä∫ Basic Worker Functionality ‚Ä∫ should handle successful calculation messages

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 52 |[39m       }[33m;[39m
     [90m 53 |[39m
    [31m[1m>[22m[39m[90m 54 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 55 |[39m
     [90m 56 |[39m       [90m// Verify response[39m
     [90m 57 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:54:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Basic Worker Functionality ‚Ä∫ should handle calculation errors gracefully

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 80 |[39m       }[33m;[39m
     [90m 81 |[39m
    [31m[1m>[22m[39m[90m 82 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 83 |[39m
     [90m 84 |[39m       [90m// Verify error response[39m
     [90m 85 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:82:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle NPV calculation message

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 103 |[39m       }[33m;[39m
     [90m 104 |[39m
    [31m[1m>[22m[39m[90m 105 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 106 |[39m
     [90m 107 |[39m       [90m// Verify NPV calculation[39m
     [90m 108 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:105:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle IRR calculation message

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 126 |[39m       }[33m;[39m
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 129 |[39m
     [90m 130 |[39m       [90m// Verify IRR calculation[39m
     [90m 131 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:128:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle payback period calculation

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 150 |[39m       }[33m;[39m
     [90m 151 |[39m
    [31m[1m>[22m[39m[90m 152 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 153 |[39m
     [90m 154 |[39m       [90m// Verify payback calculation[39m
     [90m 155 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:152:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle break-even analysis

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 175 |[39m       }[33m;[39m
     [90m 176 |[39m
    [31m[1m>[22m[39m[90m 177 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 178 |[39m
     [90m 179 |[39m       [90m// Verify break-even calculation[39m
     [90m 180 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:177:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Advanced Financial Calculations ‚Ä∫ should handle cash flow projections

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 202 |[39m       }[33m;[39m
     [90m 203 |[39m
    [31m[1m>[22m[39m[90m 204 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 205 |[39m
     [90m 206 |[39m       [90m// Verify projection calculation[39m
     [90m 207 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:204:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Performance and Large Dataset Handling ‚Ä∫ should handle large dataset calculations efficiently

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 235 |[39m       [36mconst[39m startTime [33m=[39m [33mDate[39m[33m.[39mnow()[33m;[39m
     [90m 236 |[39m
    [31m[1m>[22m[39m[90m 237 |[39m       mockWorkerScope[33m.[39monmessage({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 238 |[39m         data[33m:[39m {
     [90m 239 |[39m           periodsInputDataRaw[33m:[39m largeDataset[33m,[39m
     [90m 240 |[39m           periodTypeLabel[33m:[39m [32m'MONTHLY'[39m[33m,[39m[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:237:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Performance and Large Dataset Handling ‚Ä∫ should batch process multiple calculation types

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 285 |[39m       }[33m;[39m
     [90m 286 |[39m
    [31m[1m>[22m[39m[90m 287 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 288 |[39m
     [90m 289 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 290 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:287:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should validate NPV inputs

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 325 |[39m       invalidMessages[33m.[39mforEach((messageData) [33m=>[39m {
     [90m 326 |[39m         mockPostMessage[33m.[39mmockClear()[33m;[39m
    [31m[1m>[22m[39m[90m 327 |[39m         mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 328 |[39m
     [90m 329 |[39m         expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 330 |[39m           expect[33m.[39mobjectContaining({[0m

      at forEach (src/__tests__/workers/financialCalculator.worker.test.js:327:25)
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:325:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should handle unknown calculation types

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 344 |[39m       }[33m;[39m
     [90m 345 |[39m
    [31m[1m>[22m[39m[90m 346 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m messageData })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 347 |[39m
     [90m 348 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith(
     [90m 349 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:346:23)

  ‚óè Financial Calculator Worker ‚Ä∫ Error Handling and Validation ‚Ä∫ should handle thread safety for concurrent calculations

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 373 |[39m       [90m// Send multiple messages quickly[39m
     [90m 374 |[39m       messages[33m.[39mforEach((msg) [33m=>[39m {
    [31m[1m>[22m[39m[90m 375 |[39m         mockWorkerScope[33m.[39monmessage({ data[33m:[39m msg })[33m;[39m
     [90m     |[39m                         [31m[1m^[22m[39m
     [90m 376 |[39m       })[33m;[39m
     [90m 377 |[39m
     [90m 378 |[39m       [90m// Verify both calculations completed[39m[0m

      at forEach (src/__tests__/workers/financialCalculator.worker.test.js:375:25)
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:374:16)

  ‚óè Financial Calculator Worker ‚Ä∫ Memory Management ‚Ä∫ should clean up resources after calculation

    TypeError: mockWorkerScope.onmessage is not a function

    [0m [90m 401 |[39m       }[33m;[39m
     [90m 402 |[39m
    [31m[1m>[22m[39m[90m 403 |[39m       mockWorkerScope[33m.[39monmessage({ data[33m:[39m largeCalculation })[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 404 |[39m
     [90m 405 |[39m       [90m// Verify calculation completed[39m
     [90m 406 |[39m       expect(mockPostMessage)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (src/__tests__/workers/financialCalculator.worker.test.js:403:23)

FAIL src/__tests__/utils/customMatchers.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/testDataFactories.comprehensive.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/accessibilityUtils.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/__tests__/utils/testDataFactories.js
  ‚óè Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/TestScheduler.js:175:18)
      at node_modules/@jest/core/build/TestScheduler.js:316:17
      at node_modules/emittery/index.js:260:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:258:23)

FAIL src/services/export/__tests__/ExportService.test.js
  ‚óè ExportService ‚Ä∫ Data Validation ‚Ä∫ should detect invalid data

    TypeError: Cannot read properties of null (reading 'charts')

    [0m [90m 322 |[39m     [90m// Format-specific validation[39m
     [90m 323 |[39m     [36mif[39m (format [33m===[39m [33mExportFormat[39m[33m.[39m[33mPDF[39m) {
    [31m[1m>[22m[39m[90m 324 |[39m       [36mif[39m (data[33m.[39mcharts [33m&&[39m [33m![39m[33mArray[39m[33m.[39misArray(data[33m.[39mcharts)) {
     [90m     |[39m                [31m[1m^[22m[39m
     [90m 325 |[39m         errors[33m.[39mpush([32m'Charts must be an array'[39m)[33m;[39m
     [90m 326 |[39m       }
     [90m 327 |[39m     } [36melse[39m [36mif[39m (format [33m===[39m [33mExportFormat[39m[33m.[39m[33mEXCEL[39m) {[0m

      at ExportService.validateData (src/services/export/ExportService.js:324:16)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:56:36)

  ‚óè ExportService ‚Ä∫ Branding ‚Ä∫ should update branding configuration

    expect(received).toBe(expected) // Object.is equality

    Expected: "#ff0000"
    Received: "#007bff"

    [0m [90m 138 |[39m       [36mconst[39m updated [33m=[39m exportService[33m.[39mgetBranding()[33m;[39m
     [90m 139 |[39m       
    [31m[1m>[22m[39m[90m 140 |[39m       expect(updated[33m.[39mcolors[33m.[39mprimary)[33m.[39mtoBe([32m'#ff0000'[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 141 |[39m       expect(updated[33m.[39mwatermark[33m.[39mtext)[33m.[39mtoBe([32m'CONFIDENTIAL'[39m)[33m;[39m
     [90m 142 |[39m     })[33m;[39m
     [90m 143 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:140:38)

  ‚óè ExportService ‚Ä∫ Cross-browser Compatibility ‚Ä∫ should handle missing URL API

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of undefined (reading 'createObjectURL')"

        [0m [90m 264 |[39m [90m   */[39m
         [90m 265 |[39m   download(blob[33m,[39m fileName) {
        [31m[1m>[22m[39m[90m 266 |[39m     [36mconst[39m url [33m=[39m [33mURL[39m[33m.[39mcreateObjectURL(blob)[33m;[39m
         [90m     |[39m                     [31m[1m^[22m[39m
         [90m 267 |[39m     [36mconst[39m link [33m=[39m document[33m.[39mcreateElement([32m'a'[39m)[33m;[39m
         [90m 268 |[39m     link[33m.[39mhref [33m=[39m url[33m;[39m
         [90m 269 |[39m     link[33m.[39mdownload [33m=[39m fileName[33m;[39m[0m

      at ExportService.download (src/services/export/ExportService.js:266:21)
      at src/services/export/__tests__/ExportService.test.js:209:28
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:83:11)
      at Object.toThrow (node_modules/expect/build/index.js:382:21)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:209:74)
      at Object.<anonymous> (src/services/export/__tests__/ExportService.test.js:209:74)

FAIL src/__tests__/services/financial/FinancialCalculationService.test.js
  ‚óè Test suite failed to run

    Cannot find module 'vitest' from 'src/__tests__/services/financial/FinancialCalculationService.test.js'

    [0m[31m[1m>[22m[39m[90m 1 |[39m [36mimport[39m { describe[33m,[39m it[33m,[39m expect[33m,[39m beforeEach[33m,[39m afterEach[33m,[39m vi } [36mfrom[39m [32m'vitest'[39m[33m;[39m
     [90m   |[39m [31m[1m^[22m[39m
     [90m 2 |[39m [36mimport[39m { [33mFinancialCalculationService[39m } [36mfrom[39m [32m'../../../services/financial/FinancialCalculationService'[39m[33m;[39m
     [90m 3 |[39m
     [90m 4 |[39m [90m// Mock Worker[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/__tests__/services/financial/FinancialCalculationService.test.js:1:1)

FAIL src/__tests__/integration/pdfParser.integration.test.js (5.68 s)
  ‚óè PDF Parser Integration Tests ‚Ä∫ File Validation ‚Ä∫ should validate PDF file type

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 60 |[39m       })[33m.[39mrejects[33m.[39mtoThrow([32m'Arquivo inv√°lido'[39m)[33m;[39m
     [90m 61 |[39m
    [31m[1m>[22m[39m[90m 62 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 63 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError[33m.[39mmessage)[33m.[39mtoContain([32m'PDF v√°lido'[39m)[33m;[39m
     [90m 64 |[39m     })[33m;[39m
     [90m 65 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:62:43)

  ‚óè PDF Parser Integration Tests ‚Ä∫ File Validation ‚Ä∫ should accept valid PDF files

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:90:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ PDF.js Library Integration ‚Ä∫ should use PDF.js to load document

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:126:9

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should extract text from all pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:150:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should preserve text structure and spacing

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:174:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should handle PDFs with many pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:204:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Text Extraction ‚Ä∫ should handle empty pages

    TypeError: Cannot read properties of undefined (reading '5')

    [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
     [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
    [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
     [90m    |[39m                                              [31m[1m^[22m[39m
     [90m 65 |[39m           
     [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
     [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
          at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:232:25

  ‚óè PDF Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle PDF loading errors

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 257 |[39m       })[33m.[39mrejects[33m.[39mtoThrow([32m'Invalid PDF structure'[39m)[33m;[39m
     [90m 258 |[39m
    [31m[1m>[22m[39m[90m 259 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 260 |[39m       expect(result[33m.[39mcurrent[33m.[39misParsing)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 261 |[39m     })[33m;[39m
     [90m 262 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:259:43)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle page extraction errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Page extraction failed"
    Received message:   "Cannot read properties of undefined (reading '5')"

        [0m [90m 62 |[39m         [90m// Group text items by their vertical position to maintain lines[39m
         [90m 63 |[39m         textContent[33m.[39mitems[33m.[39mforEach(item [33m=>[39m {
        [31m[1m>[22m[39m[90m 64 |[39m           [36mconst[39m y [33m=[39m [33mMath[39m[33m.[39mround(item[33m.[39mtransform[[35m5[39m])[33m;[39m [90m// Vertical position[39m
         [90m    |[39m                                              [31m[1m^[22m[39m
         [90m 65 |[39m           
         [90m 66 |[39m           [36mif[39m (lastY [33m!==[39m [36mnull[39m [33m&&[39m [33mMath[39m[33m.[39mabs(y [33m-[39m lastY) [33m>[39m [35m5[39m) {
         [90m 67 |[39m             [90m// New line detected[39m[0m

      at forEach (src/hooks/usePdfParser.js:64:46)
                at Array.forEach (<anonymous>)
      at Object.extractTextFromPdf (src/hooks/usePdfParser.js:63:27)
      at src/__tests__/integration/pdfParser.integration.test.js:285:11
      at Object.toThrow (node_modules/expect/build/index.js:285:22)
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:287:18)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Loading State Management ‚Ä∫ should manage isParsing state correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 336 |[39m
     [90m 337 |[39m       [90m// Check loading state immediately[39m
    [31m[1m>[22m[39m[90m 338 |[39m       expect(result[33m.[39mcurrent[33m.[39misParsing)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 339 |[39m
     [90m 340 |[39m       [90m// Resolve the document loading[39m
     [90m 341 |[39m       resolveDocument(mockDocument)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:338:40)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Loading State Management ‚Ä∫ should reset error state on new extraction

    TypeError: Cannot read properties of null (reading 'parsingError')

    [0m [90m 360 |[39m       }
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeTruthy()[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 363 |[39m
     [90m 364 |[39m       [90m// Now try with valid file[39m
     [90m 365 |[39m       [36mconst[39m validFile [33m=[39m [36mnew[39m [33mFile[39m([[32m'%PDF-1.4'[39m][33m,[39m [32m'test.pdf'[39m[33m,[39m { type[33m:[39m [32m'application/pdf'[39m })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:362:29)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Financial Data Extraction Scenarios ‚Ä∫ should extract Brazilian financial statements

    TypeError: Cannot read properties of null (reading 'extractTextFromPdf')

    [0m [90m 397 |[39m       [36mlet[39m extractedData[33m;[39m
     [90m 398 |[39m       [36mawait[39m act([36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 399 |[39m         extractedData [33m=[39m [36mawait[39m result[33m.[39mcurrent[33m.[39mextractTextFromPdf(pdfFile)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 400 |[39m       })[33m;[39m
     [90m 401 |[39m
     [90m 402 |[39m       expect(extractedData[33m.[39mtext)[33m.[39mtoContain([32m'DEMONSTRA√á√ÉO DE RESULTADOS'[39m)[33m;[39m[0m

      at src/__tests__/integration/pdfParser.integration.test.js:399:46
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:398:16)

  ‚óè PDF Parser Integration Tests ‚Ä∫ Financial Data Extraction Scenarios ‚Ä∫ should extract financial tables and preserve structure

    TypeError: Cannot read properties of null (reading 'extractTextFromPdf')

    [0m [90m 429 |[39m       [36mlet[39m extractedData[33m;[39m
     [90m 430 |[39m       [36mawait[39m act([36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 431 |[39m         extractedData [33m=[39m [36mawait[39m result[33m.[39mcurrent[33m.[39mextractTextFromPdf(pdfFile)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 432 |[39m       })[33m;[39m
     [90m 433 |[39m
     [90m 434 |[39m       expect(extractedData[33m.[39mtext)[33m.[39mtoContain([32m'Q1 2024'[39m)[33m;[39m[0m

      at src/__tests__/integration/pdfParser.integration.test.js:431:46
      at node_modules/@testing-library/react/dist/act-compat.js:64:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at Object.<anonymous> (src/__tests__/integration/pdfParser.integration.test.js:430:16)

FAIL src/__tests__/integration/excelParser.integration.test.js (5.764 s)
  ‚óè Excel Parser Integration Tests ‚Ä∫ Worksheet Detection ‚Ä∫ should find worksheet with financial headers

    expect(received).toBeNull()

    Received: "Nenhum dado financeiro encontrado na planilha."

    [0m [90m 57 |[39m       })[33m;[39m
     [90m 58 |[39m
    [31m[1m>[22m[39m[90m 59 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoBeNull()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 60 |[39m       expect(parsedData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 61 |[39m     })[33m;[39m
     [90m 62 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:59:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Worksheet Detection ‚Ä∫ should fallback to sheet with "Dados" in name

    expect(jest.fn()).not.toHaveBeenCalled()

    Expected number of calls: 0
    Received number of calls: 1

    1: 1

    [0m [90m 88 |[39m
     [90m 89 |[39m       expect(dataSheet[33m.[39mgetRow)[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 90 |[39m       expect(instructionSheet[33m.[39mgetRow)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m    |[39m                                           [31m[1m^[22m[39m
     [90m 91 |[39m     })[33m;[39m
     [90m 92 |[39m
     [90m 93 |[39m     it([32m'should handle worksheets without proper headers'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:90:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods with strict "Per√≠odo X" pattern

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 129 |[39m       })[33m;[39m
     [90m 130 |[39m
    [31m[1m>[22m[39m[90m 131 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 132 |[39m     })[33m;[39m
     [90m 133 |[39m
     [90m 134 |[39m     it([32m'should detect periods with loose patterns (P1, P2, etc)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:131:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods with loose patterns (P1, P2, etc)

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 153 |[39m       })[33m;[39m
     [90m 154 |[39m
    [31m[1m>[22m[39m[90m 155 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 156 |[39m     })[33m;[39m
     [90m 157 |[39m
     [90m 158 |[39m     it([32m'should detect periods by column position between Description and Notes'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:155:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should detect periods by column position between Description and Notes

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 177 |[39m       })[33m;[39m
     [90m 178 |[39m
    [31m[1m>[22m[39m[90m 179 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 180 |[39m     })[33m;[39m
     [90m 181 |[39m
     [90m 182 |[39m     it([32m'should limit detected periods to MAX_PERIODS'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:179:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Period Detection ‚Ä∫ should limit detected periods to MAX_PERIODS

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 209 |[39m       })[33m;[39m
     [90m 210 |[39m
    [31m[1m>[22m[39m[90m 211 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m6[39m)[33m;[39m [90m// MAX_PERIODS is 6[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 212 |[39m     })[33m;[39m
     [90m 213 |[39m   })[33m;[39m
     [90m 214 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:211:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should extract revenue data correctly

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 237 |[39m       })[33m;[39m
     [90m 238 |[39m
    [31m[1m>[22m[39m[90m 239 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 240 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 241 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m 242 |[39m       expect(parsedData[[35m0[39m][33m.[39moperatingExpenses)[33m.[39mtoBe([35m300000[39m)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:239:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should handle working capital days fields

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 266 |[39m       })[33m;[39m
     [90m 267 |[39m
    [31m[1m>[22m[39m[90m 268 |[39m       expect(parsedData[[35m0[39m][33m.[39maccountsReceivableDays)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 269 |[39m       expect(parsedData[[35m0[39m][33m.[39minventoryDays)[33m.[39mtoBe([35m30[39m)[33m;[39m
     [90m 270 |[39m       expect(parsedData[[35m0[39m][33m.[39maccountsPayableDays)[33m.[39mtoBe([35m60[39m)[33m;[39m
     [90m 271 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:268:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should handle percentage values correctly

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 295 |[39m       })[33m;[39m
     [90m 296 |[39m
    [31m[1m>[22m[39m[90m 297 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m [90m// Converted from 0.45[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 298 |[39m     })[33m;[39m
     [90m 299 |[39m
     [90m 300 |[39m     it([32m'should skip grey-filled cells'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:297:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Extraction ‚Ä∫ should skip grey-filled cells

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 325 |[39m       })[33m;[39m
     [90m 326 |[39m
    [31m[1m>[22m[39m[90m 327 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Grey cell skipped[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 328 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 329 |[39m     })[33m;[39m
     [90m 330 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:327:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle empty worksheets

    expect(received).toContain(expected) // indexOf

    Expected substring: "dados encontrados"
    Received string:    "Cannot read properties of undefined (reading 'values')"

    [0m [90m 359 |[39m       })[33m;[39m
     [90m 360 |[39m
    [31m[1m>[22m[39m[90m 361 |[39m       expect(result[33m.[39mcurrent[33m.[39mparsingError)[33m.[39mtoContain([32m'dados encontrados'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 362 |[39m     })[33m;[39m
     [90m 363 |[39m
     [90m 364 |[39m     it([32m'should handle missing required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:361:43)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Error Handling ‚Ä∫ should handle missing required fields

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 385 |[39m       })[33m;[39m
     [90m 386 |[39m
    [31m[1m>[22m[39m[90m 387 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 388 |[39m     })[33m;[39m
     [90m 389 |[39m   })[33m;[39m
     [90m 390 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:387:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Validation ‚Ä∫ should validate numeric values

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 412 |[39m       })[33m;[39m
     [90m 413 |[39m
    [31m[1m>[22m[39m[90m 414 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBeUndefined()[33m;[39m [90m// Invalid value skipped[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m
     [90m 417 |[39m     it([32m'should handle formula results'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:414:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Data Validation ‚Ä∫ should handle formula results

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 439 |[39m       })[33m;[39m
     [90m 440 |[39m
    [31m[1m>[22m[39m[90m 441 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m [90m// Extracts result from formula[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 442 |[39m     })[33m;[39m
     [90m 443 |[39m   })[33m;[39m
     [90m 444 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:441:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Performance Tests ‚Ä∫ should handle large Excel files efficiently

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 477 |[39m
     [90m 478 |[39m       expect(executionTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m [90m// Should complete within 5 seconds[39m
    [31m[1m>[22m[39m[90m 479 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 480 |[39m     })[33m;[39m
     [90m 481 |[39m   })[33m;[39m
     [90m 482 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:479:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle merged cells

    expect(received).toHaveLength(expected)

    Matcher error: received value must have a length property whose value must be a number

    Received has value: null

    [0m [90m 503 |[39m       })[33m;[39m
     [90m 504 |[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(parsedData)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 506 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m 507 |[39m       expect(parsedData[[35m1[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1100000[39m)[33m;[39m
     [90m 508 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:505:26)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle hidden rows and columns

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 533 |[39m
     [90m 534 |[39m       [90m// Hidden rows should still be processed in this implementation[39m
    [31m[1m>[22m[39m[90m 535 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 536 |[39m       expect(parsedData[[35m0[39m][33m.[39moperatingExpenses)[33m.[39mtoBe([35m300000[39m)[33m;[39m
     [90m 537 |[39m     })[33m;[39m
     [90m 538 |[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:535:24)

  ‚óè Excel Parser Integration Tests ‚Ä∫ Edge Cases ‚Ä∫ should handle special characters in field names

    TypeError: Cannot read properties of null (reading '0')

    [0m [90m 560 |[39m       })[33m;[39m
     [90m 561 |[39m
    [31m[1m>[22m[39m[90m 562 |[39m       expect(parsedData[[35m0[39m][33m.[39mrevenue)[33m.[39mtoBe([35m1000000[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 563 |[39m       expect(parsedData[[35m0[39m][33m.[39mgrossMarginPercent)[33m.[39mtoBe([35m45[39m)[33m;[39m
     [90m 564 |[39m       expect(parsedData[[35m0[39m][33m.[39mdepreciation)[33m.[39mtoBe([35m20000[39m)[33m;[39m
     [90m 565 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/integration/excelParser.integration.test.js:562:24)

FAIL src/__tests__/integration/aiService.integration.test.js (5.833 s)
  ‚óè AI Service Integration Tests ‚Ä∫ API Key Validation ‚Ä∫ should not require API key for local providers

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:146:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle executive summary analysis

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:163:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle variance analysis

    Falha na an√°lise variance_analysis. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:181:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle financial data extraction from PDF

    Falha na an√°lise financial_data_extraction. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:203:20

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis Types ‚Ä∫ should handle risk assessment analysis

    Falha na an√°lise risk_assessment. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:220:20

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should apply temperature settings correctly

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:340:9

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should respect max tokens limit

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:361:9

  ‚óè AI Service Integration Tests ‚Ä∫ Request Options ‚Ä∫ should use provider-specific model when specified

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:382:9

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis History ‚Ä∫ should track analysis history

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:406:9

  ‚óè AI Service Integration Tests ‚Ä∫ Analysis History ‚Ä∫ should provide provider insights

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:433:9

  ‚óè AI Service Integration Tests ‚Ä∫ Multi-Provider Support ‚Ä∫ should format requests correctly for different providers

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:456:11

  ‚óè AI Service Integration Tests ‚Ä∫ Response Validation ‚Ä∫ should validate and standardize AI responses

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:476:20

  ‚óè AI Service Integration Tests ‚Ä∫ Response Validation ‚Ä∫ should handle responses with missing fields

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:504:20

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise variance_analysis. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise risk_assessment. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle concurrent requests

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)

  ‚óè AI Service Integration Tests ‚Ä∫ Performance and Optimization ‚Ä∫ should handle large financial datasets

    Falha na an√°lise executive_summary. Por favor, verifique sua conex√£o e tente novamente.

    [0m [90m 155 |[39m       
     [90m 156 |[39m       [90m// Create user-friendly error message without exposing system internals[39m
    [31m[1m>[22m[39m[90m 157 |[39m       [36mconst[39m userFriendlyError [33m=[39m [36mnew[39m [33mError[39m(
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 158 |[39m         [32m`Falha na an√°lise ${analysisType}. Por favor, verifique sua conex√£o e tente novamente.`[39m
     [90m 159 |[39m       )[33m;[39m
     [90m 160 |[39m       setError(userFriendlyError)[33m;[39m[0m

      at Object.callAiAnalysis (src/hooks/useAiService.js:157:33)
      at src/__tests__/integration/aiService.integration.test.js:556:20

FAIL src/__tests__/utils/testUtils.js
  ‚óè Test suite failed to run

    Cannot find module 'react-router-dom' from 'src/__tests__/utils/testUtils.js'

    [0m [90m  6 |[39m [36mimport[39m [33mReact[39m [36mfrom[39m [32m'react'[39m[33m;[39m
     [90m  7 |[39m [36mimport[39m { render } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  8 |[39m [36mimport[39m { [33mBrowserRouter[39m } [36mfrom[39m [32m'react-router-dom'[39m[33m;[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m  9 |[39m
     [90m 10 |[39m [90m/**[39m
     [90m 11 |[39m [90m * Custom render function that wraps components with necessary providers[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/__tests__/utils/testUtils.js:8:1)

FAIL src/utils/__tests__/calculations.test.js (6.308 s)
  ‚óè Financial Calculations Engine ‚Ä∫ calculateIncomeStatement ‚Ä∫ should calculate income statement with all provided values

    expect(received).toEqual(expected) // deep equality

    - Expected  -  3
    + Received  + 78

      Object {
    +   "auditTrail": Object {
    +     "calculationSteps": Array [
    +       Object {
    +         "formula": "data.revenue",
    +         "step": "revenue",
    +         "value": 1000000,
    +       },
    +       Object {
    +         "formula": "data.cogs",
    +         "source": "input",
    +         "step": "cogs",
    +         "value": 600000,
    +       },
    +       Object {
    +         "formula": "revenue - cogs = 1000000 - 600000",
    +         "metric": "grossProfit",
    +         "value": 400000,
    +       },
    +       Object {
    +         "formula": "(grossProfit / revenue) * 100 = (400000 / 1000000) * 100",
    +         "metric": "grossMarginPercent",
    +         "value": 40,
    +       },
    +       Object {
    +         "formula": "grossProfit - operatingExpenses = 400000 - 200000",
    +         "metric": "ebitda",
    +         "source": "calculated",
    +         "value": 200000,
    +       },
    +       Object {
    +         "formula": "ebitda - depreciation = 200000 - 50000",
    +         "metric": "ebit",
    +         "value": 150000,
    +       },
    +       Object {
    +         "formula": "ebit + netFinancialResult = 150000 + -20000",
    +         "metric": "ebt",
    +         "value": 130000,
    +       },
    +       Object {
    +         "detail": "IRPJ: 19500 base + 0 surtax",
    +         "formula": "IRPJ (19500) + CSLL (11700)",
    +         "metric": "taxes",
    +         "value": 31200,
    +       },
    +       Object {
    +         "formula": "ebt - taxes = 130000 - 31200",
    +         "metric": "netIncome",
    +         "value": 98800,
    +       },
    +     ],
    +     "originalValues": Object {
    +       "cogs": 600000,
    +       "depreciation": 50000,
    +       "financialExpenses": 30000,
    +       "financialRevenue": 10000,
    +       "operatingExpenses": 200000,
    +       "revenue": 1000000,
    +     },
    +     "overrides": null,
    +     "system": "EnterpriseCashFlow",
    +     "timestamp": "2025-11-03T21:47:45.408Z",
    +     "validationResults": Object {
    +       "errors": Array [],
    +       "warnings": Array [],
    +     },
    +     "version": "1.0",
    +   },
        "cogs": 600000,
        "depreciation": 50000,
        "ebit": 150000,
        "ebitMargin": 15,
        "ebitda": 200000,
        "ebitdaMargin": 20,
        "ebt": 130000,
    +   "effectiveTaxRate": 24,
        "grossMarginPercent": 40,
        "grossProfit": 400000,
        "netFinancialResult": -20000,
    -   "netIncome": 85800,
    -   "netMargin": 8.58,
    +   "netIncome": 98800,
    +   "netMargin": 9.88,
        "operatingExpenses": 200000,
        "revenue": 1000000,
    -   "taxes": 44200,
    +   "taxBreakdown": Object {
    +     "csll": 11700,
    +     "irpj": 19500,
    +     "irpjBase": 19500,
    +     "irpjSurtax": 0,
    +   },
    +   "taxes": 31200,
      }

    [0m [90m 25 |[39m       [36mconst[39m result [33m=[39m calculateIncomeStatement(input)[33m;[39m
     [90m 26 |[39m
    [31m[1m>[22m[39m[90m 27 |[39m       expect(result)[33m.[39mtoEqual({
     [90m    |[39m                      [31m[1m^[22m[39m
     [90m 28 |[39m         revenue[33m:[39m [35m1000000[39m[33m,[39m
     [90m 29 |[39m         cogs[33m:[39m [35m600000[39m[33m,[39m
     [90m 30 |[39m         grossProfit[33m:[39m [35m400000[39m[33m,[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:27:22)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateCashFlow ‚Ä∫ should handle first period without previous data

    expect(received).toBe(expected) // Object.is equality

    Expected: 120000
    Received: -50000

    [0m [90m 136 |[39m       [36mconst[39m result [33m=[39m calculateCashFlow(currentPeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 137 |[39m
    [31m[1m>[22m[39m[90m 138 |[39m       expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// Net income + depreciation[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 139 |[39m       expect(result[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:138:40)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateBalanceSheet ‚Ä∫ should estimate balance sheet components

    expect(received).toBe(expected) // Object.is equality

    Expected: 130000
    Received: 150000

    [0m [90m 359 |[39m       expect(result[33m.[39mnonCurrentAssets)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 360 |[39m       expect(result[33m.[39mtotalAssets)[33m.[39mtoBe(result[33m.[39mcurrentAssets [33m+[39m result[33m.[39mnonCurrentAssets)[33m;[39m
    [31m[1m>[22m[39m[90m 361 |[39m       expect(result[33m.[39mcurrentLiabilities)[33m.[39mtoBe([35m130000[39m)[33m;[39m [90m// AP (80000) + Short-term debt (50000)[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 362 |[39m       expect(result[33m.[39mtotalLiabilitiesEquity)[33m.[39mtoBe(result[33m.[39mtotalAssets)[33m;[39m
     [90m 363 |[39m     })[33m;[39m
     [90m 364 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:361:41)

  ‚óè Financial Calculations Engine ‚Ä∫ calculateBalanceSheet ‚Ä∫ should calculate balance sheet check

    expect(received).toBeLessThan(expected)

    Expected: < 0.01
    Received:   NaN

    [0m [90m 367 |[39m
     [90m 368 |[39m       [36mconst[39m balanceCheck [33m=[39m [33mMath[39m[33m.[39mabs(result[33m.[39mtotalAssets [33m-[39m result[33m.[39mtotalLiabilitiesEquity)[33m;[39m
    [31m[1m>[22m[39m[90m 369 |[39m       expect(balanceCheck)[33m.[39mtoBeLessThan([35m0.01[39m)[33m;[39m [90m// Should balance[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 370 |[39m     })[33m;[39m
     [90m 371 |[39m
     [90m 372 |[39m     it([32m'should handle missing data with estimates'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.test.js:369:28)

FAIL src/__tests__/utils/financialCalculations.comprehensive.test.js (6.344 s)
  ‚óè DEFECT #1: Balance Sheet Estimation - Asset Turnover Approach ‚Ä∫ Asset turnover calculation ‚Ä∫ should use asset turnover ratio instead of revenue * 0.8

    expect(received).toBeCloseTo(expected, precision)

    Expected: 400000
    Received: 452602.74

    Expected precision:    -3
    Expected difference: < 500
    Received difference:   52602.73999999999

    [0m [90m 151 |[39m       [90m// estimatedTotalAssets = 1,000,000 / 2.5 = 400,000[39m
     [90m 152 |[39m       [90m// NOT revenue * 0.8 = 800,000[39m
    [31m[1m>[22m[39m[90m 153 |[39m       expect(balanceSheet[33m.[39mtotalAssets)[33m.[39mtoBeCloseTo([35m400000[39m[33m,[39m [33m-[39m[35m3[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 154 |[39m     })[33m;[39m
     [90m 155 |[39m
     [90m 156 |[39m     test([32m'should calculate fixed assets as 40% of estimated total assets'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:153:40)

  ‚óè DEFECT #1: Balance Sheet Estimation - Asset Turnover Approach ‚Ä∫ Asset turnover calculation ‚Ä∫ should allow custom asset turnover ratio

    expect(received).toBeCloseTo(expected, precision)

    Expected: 200000
    Received: 350000

    Expected precision:    -3
    Expected difference: < 500
    Received difference:   150000

    [0m [90m 188 |[39m
     [90m 189 |[39m       [90m// estimatedTotalAssets = 1,000,000 / 5.0 = 200,000[39m
    [31m[1m>[22m[39m[90m 190 |[39m       expect(balanceSheet[33m.[39mtotalAssets)[33m.[39mtoBeCloseTo([35m200000[39m[33m,[39m [33m-[39m[35m3[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 191 |[39m     })[33m;[39m
     [90m 192 |[39m
     [90m 193 |[39m     test([32m'should validate balance sheet equation A = L + E'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:190:40)

  ‚óè DEFECT #4: Cash Flow Working Capital - First Period Calculation ‚Ä∫ Edge cases ‚Ä∫ should handle zero working capital in first period

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: -0

    [0m [90m 486 |[39m
     [90m 487 |[39m       [36mconst[39m cashFlow [33m=[39m calculateCashFlow(currentPeriod[33m,[39m [36mnull[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 488 |[39m       expect(cashFlow[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 489 |[39m     })[33m;[39m
     [90m 490 |[39m
     [90m 491 |[39m     test([32m'should handle negative working capital change (cash inflow)'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:488:45)

  ‚óè DEFECT #5: Audit Trail System ‚Ä∫ Audit trail creation ‚Ä∫ should track calculation steps

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 546 |[39m
     [90m 547 |[39m       expect(auditTrail[33m.[39mcalculationSteps)[33m.[39mtoBeInstanceOf([33mArray[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 548 |[39m       expect(auditTrail[33m.[39mcalculationSteps[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 549 |[39m     })[33m;[39m
     [90m 550 |[39m
     [90m 551 |[39m     test([32m'should track overrides applied'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/utils/financialCalculations.comprehensive.test.js:548:50)

FAIL src/utils/__tests__/calculations.comprehensive.test.js (6.379 s)
  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateIncomeStatement ‚Ä∫ Tax calculations ‚Ä∫ should calculate taxes on positive income

    expect(received).toBe(expected) // Object.is equality

    Expected: 95200
    Received: 65200

    [0m [90m 110 |[39m         
     [90m 111 |[39m         expect(result[33m.[39mebt)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 112 |[39m         expect(result[33m.[39mtaxes)[33m.[39mtoBe([33mMath[39m[33m.[39mround(result[33m.[39mebt [33m*[39m [35m0.34[39m [33m*[39m [35m100[39m) [33m/[39m [35m100[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
     [90m 115 |[39m       it([32m'should not apply taxes on negative income'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:112:30)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Operating cash flow calculations ‚Ä∫ should calculate OCF for first period (no WC change)

    expect(received).toBe(expected) // Object.is equality

    Expected: 120000
    Received: -50000

    [0m [90m 205 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(basePeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 206 |[39m         
    [31m[1m>[22m[39m[90m 207 |[39m         expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// NI + Depreciation[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 208 |[39m         expect(result[33m.[39mworkingCapitalChange)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 209 |[39m       })[33m;[39m
     [90m 210 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:207:42)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Investing and free cash flow ‚Ä∫ should calculate investing cash flow with provided capex

    expect(received).toBe(expected) // Object.is equality

    Expected: 70000
    Received: -100000

    [0m [90m 250 |[39m         expect(result[33m.[39mcapex)[33m.[39mtoBe([35m50000[39m)[33m;[39m
     [90m 251 |[39m         expect(result[33m.[39minvestingCashFlow)[33m.[39mtoBe([33m-[39m[35m50000[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 252 |[39m         expect(result[33m.[39mfreeCashFlow)[33m.[39mtoBe([35m70000[39m)[33m;[39m [90m// 120k - 50k[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
     [90m 255 |[39m       it([32m'should use default capex rate when not provided'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:252:37)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Financing cash flow ‚Ä∫ should calculate financing cash flow correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 190000
    Received: 20000

    [0m [90m 278 |[39m         
     [90m 279 |[39m         expect(result[33m.[39mfinancingCashFlow)[33m.[39mtoBe([35m120000[39m)[33m;[39m [90m// 100k + 50k - 30k[39m
    [31m[1m>[22m[39m[90m 280 |[39m         expect(result[33m.[39mnetCashFlow)[33m.[39mtoBe([35m190000[39m)[33m;[39m [90m// 120k - 50k + 120k[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 281 |[39m       })[33m;[39m
     [90m 282 |[39m
     [90m 283 |[39m       it([32m'should handle debt repayment and dividend payments'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:280:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Cash conversion metrics ‚Ä∫ should calculate cash conversion rate correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 120
    Received: -50

    [0m [90m 299 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(basePeriod[33m,[39m [36mnull[39m)[33m;[39m
     [90m 300 |[39m         
    [31m[1m>[22m[39m[90m 301 |[39m         expect(result[33m.[39mcashConversionRate)[33m.[39mtoBe([35m120[39m)[33m;[39m [90m// (120k / 100k) * 100[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 302 |[39m       })[33m;[39m
     [90m 303 |[39m
     [90m 304 |[39m       it([32m'should handle negative net income'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:301:43)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateCashFlow ‚Ä∫ Cash conversion metrics ‚Ä∫ should handle negative net income

    expect(received).toBe(expected) // Object.is equality

    Expected: -30000
    Received: -200000

    [0m [90m 313 |[39m         [36mconst[39m result [33m=[39m calculateCashFlow(lossmaking[33m,[39m [36mnull[39m)[33m;[39m
     [90m 314 |[39m         
    [31m[1m>[22m[39m[90m 315 |[39m         expect(result[33m.[39moperatingCashFlow)[33m.[39mtoBe([33m-[39m[35m30000[39m)[33m;[39m [90m// -50k + 20k[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 316 |[39m         expect(result[33m.[39mcashConversionRate)[33m.[39mtoBe([35m60[39m)[33m;[39m [90m// (-30k / -50k) * 100[39m
     [90m 317 |[39m       })[33m;[39m
     [90m 318 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:315:42)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateWorkingCapitalMetrics ‚Ä∫ Cash conversion cycle ‚Ä∫ should handle negative CCC (good cash management)

    expect(received).toBeLessThan(expected)

    Expected: < 0
    Received:   16438.35

    [0m [90m 411 |[39m         
     [90m 412 |[39m         expect(result[33m.[39mcashConversionCycle)[33m.[39mtoBe([33m-[39m[35m10[39m)[33m;[39m [90m// 30 + 20 - 60[39m
    [31m[1m>[22m[39m[90m 413 |[39m         expect(result[33m.[39mworkingCapitalValue)[33m.[39mtoBeLessThan([35m0[39m)[33m;[39m [90m// Negative WC is good![39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 414 |[39m       })[33m;[39m
     [90m 415 |[39m     })[33m;[39m
     [90m 416 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:413:44)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateWorkingCapitalMetrics ‚Ä∫ Edge cases ‚Ä∫ should handle zero revenue

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 45

    [0m [90m 458 |[39m         
     [90m 459 |[39m         expect(result[33m.[39maccountsReceivableValue)[33m.[39mtoBe([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 460 |[39m         expect(result[33m.[39mdso)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 461 |[39m         expect(result[33m.[39mworkingCapitalValue)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 462 |[39m       })[33m;[39m
     [90m 463 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:460:28)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should estimate cash and current assets

    expect(received).toBe(expected) // Object.is equality

    Expected: 350000
    Received: 370000

    [0m [90m 629 |[39m         expect(result[33m.[39maccountsReceivable)[33m.[39mtoBe([35m150000[39m)[33m;[39m
     [90m 630 |[39m         expect(result[33m.[39minventory)[33m.[39mtoBe([35m100000[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 631 |[39m         expect(result[33m.[39mcurrentAssets)[33m.[39mtoBe([35m350000[39m)[33m;[39m [90m// 100k + 150k + 100k[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 632 |[39m       })[33m;[39m
     [90m 633 |[39m
     [90m 634 |[39m       it([32m'should calculate non-current assets to balance'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:631:38)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should calculate non-current assets to balance

    expect(received).toBe(expected) // Object.is equality

    Expected: 800000
    Received: 530000

    [0m [90m 635 |[39m         [36mconst[39m result [33m=[39m calculateBalanceSheet(baseData)[33m;[39m
     [90m 636 |[39m         
    [31m[1m>[22m[39m[90m 637 |[39m         expect(result[33m.[39mtotalAssets)[33m.[39mtoBe([35m800000[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 638 |[39m         expect(result[33m.[39mnonCurrentAssets)[33m.[39mtoBe([35m450000[39m)[33m;[39m [90m// 800k - 350k[39m
     [90m 639 |[39m       })[33m;[39m
     [90m 640 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:637:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Asset calculations ‚Ä∫ should use revenue-based estimation when total assets not provided

    expect(received).toBe(expected) // Object.is equality

    Expected: 800000
    Received: 530000

    [0m [90m 649 |[39m         [36mconst[39m result [33m=[39m calculateBalanceSheet(data)[33m;[39m
     [90m 650 |[39m         
    [31m[1m>[22m[39m[90m 651 |[39m         expect(result[33m.[39mtotalAssets)[33m.[39mtoBe([35m800000[39m)[33m;[39m [90m// 80% of revenue[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 652 |[39m       })[33m;[39m
     [90m 653 |[39m     })[33m;[39m
     [90m 654 |[39m[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:651:36)

  ‚óè Financial Calculations - Comprehensive Tests ‚Ä∫ calculateBalanceSheet ‚Ä∫ Liability calculations ‚Ä∫ should calculate current liabilities

    expect(received).toBe(expected) // Object.is equality

    Expected: 130000
    Received: 150000

    [0m [90m 659 |[39m         expect(result[33m.[39maccountsPayable)[33m.[39mtoBe([35m80000[39m)[33m;[39m
     [90m 660 |[39m         expect(result[33m.[39mshortTermDebt)[33m.[39mtoBe([35m50000[39m)[33m;[39m [90m// 5% of revenue[39m
    [31m[1m>[22m[39m[90m 661 |[39m         expect(result[33m.[39mcurrentLiabilities)[33m.[39mtoBe([35m130000[39m)[33m;[39m [90m// 80k + 50k[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 662 |[39m       })[33m;[39m
     [90m 663 |[39m
     [90m 664 |[39m       it([32m'should balance with appropriate debt/equity ratio'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/utils/__tests__/calculations.comprehensive.test.js:661:43)

FAIL src/components/__tests__/ExcelUploader.test.js (6.62 s)
  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should handle file selection via input

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 73 |[39m       })[33m;[39m
     [90m 74 |[39m
    [31m[1m>[22m[39m[90m 75 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 76 |[39m       [36mawait[39m user[33m.[39mupload(input[33m,[39m file)[33m;[39m
     [90m 77 |[39m
     [90m 78 |[39m       expect(defaultProps[33m.[39monFileUpload)[33m.[39mtoHaveBeenCalledWith(file)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:75:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should clear input after file selection

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 87 |[39m       })[33m;[39m
     [90m 88 |[39m
    [31m[1m>[22m[39m[90m 89 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 90 |[39m       [36mawait[39m user[33m.[39mupload(input[33m,[39m file)[33m;[39m
     [90m 91 |[39m
     [90m 92 |[39m       expect(input[33m.[39mvalue)[33m.[39mtoBe([32m''[39m)[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:89:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should disable upload when loading

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center opacity-50 cursor-not-allowed"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mdisabled[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m  96 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} isLoading[33m=[39m{[36mtrue[39m} [33m/[39m[33m>[39m)[33m;[39m
     [90m  97 |[39m       
    [31m[1m>[22m[39m[90m  98 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m  99 |[39m       expect(input)[33m.[39mtoBeDisabled()[33m;[39m
     [90m 100 |[39m     })[33m;[39m
     [90m 101 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:98:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should disable upload when ExcelJS is loading

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
              [33mdisabled[39m=[32m""[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center opacity-50 cursor-not-allowed"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mdisabled[39m=[32m""[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 103 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} isExcelJsLoading[33m=[39m{[36mtrue[39m} [33m/[39m[33m>[39m)[33m;[39m
     [90m 104 |[39m       
    [31m[1m>[22m[39m[90m 105 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 106 |[39m       expect(input)[33m.[39mtoBeDisabled()[33m;[39m
     [90m 107 |[39m     })[33m;[39m
     [90m 108 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:105:28)

  ‚óè ExcelUploader Component ‚Ä∫ File Upload ‚Ä∫ should accept Excel file types

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 110 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m 111 |[39m       
    [31m[1m>[22m[39m[90m 112 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 113 |[39m       expect(input)[33m.[39mtoHaveAttribute([32m'accept'[39m[33m,[39m [32m'.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m)[33m;[39m
     [90m 114 |[39m     })[33m;[39m
     [90m 115 |[39m   })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:112:28)

  ‚óè ExcelUploader Component ‚Ä∫ Template Download ‚Ä∫ should disable template download when processing

    expect(element).toBeDisabled()

    Received element is not disabled:
      <button data-testid="template-download-button" />

    [0m [90m 137 |[39m       
     [90m 138 |[39m       [36mconst[39m downloadButton [33m=[39m screen[33m.[39mgetByTestId([32m'template-download-button'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 139 |[39m       expect(downloadButton)[33m.[39mtoBeDisabled()[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 140 |[39m     })[33m;[39m
     [90m 141 |[39m   })[33m;[39m
     [90m 142 |[39m[0m

      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:139:30)

  ‚óè ExcelUploader Component ‚Ä∫ Accessibility ‚Ä∫ should have accessible file input

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/carregar planilha excel/i`

    Here are the accessible roles:

      heading:

      Name "Entrada de Dados via Excel (Upload Adaptativo)":
      [36m<h2[39m
        [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
      [36m/>[39m

      Name "Ou Carregue seu Arquivo Preenchido:":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Baixar Modelo Excel":
      [36m<button[39m
        [33mdata-testid[39m=[32m"template-download-button"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-xl border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada de Dados via Excel (Upload Adaptativo)[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"excel-template-selector"[39m
          [36m>[39m
            [36m<button[39m
              [33mdata-testid[39m=[32m"template-download-button"[39m
            [36m>[39m
              [0mBaixar Modelo Excel[0m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-8 border-t border-slate-200 pt-6"[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-medium text-slate-700 mb-4 text-center"[39m
            [36m>[39m
              [0mOu Carregue seu Arquivo Preenchido:[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-center"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 text-center cursor-pointer"[39m
              [36m>[39m
                [36m<span[39m
                  [33mclass[39m=[32m"flex items-center justify-center"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"h-5 w-5 mr-2"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCarregar Planilha Excel (.xlsx)[0m
                [36m</span>[39m
                [36m<input[39m
                  [33maccept[39m=[32m".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"[39m
                  [33mclass[39m=[32m"hidden"[39m
                  [33mtype[39m=[32m"file"[39m
                [36m/>[39m
              [36m</label>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mt-4 text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-xs text-slate-500 mt-2"[39m
            [36m>[39m
              [0mA plataforma tentar√° identificar automaticamente o formato do template e o n√∫mero de per√≠odos do seu arquivo. Recomendamos usar o "Template Inteligente".[0m
            [36m</p>[39m
          [36m</div>[39m
        [36m</section>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 175 |[39m       render([33m<[39m[33mExcelUploader[39m {[33m...[39mdefaultProps} [33m/[39m[33m>[39m)[33m;[39m
     [90m 176 |[39m       
    [31m[1m>[22m[39m[90m 177 |[39m       [36mconst[39m input [33m=[39m screen[33m.[39mgetByRole([32m'button'[39m[33m,[39m { name[33m:[39m [35m/carregar planilha excel/i[39m })[33m.[39mquerySelector([32m'input'[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 178 |[39m       expect(input)[33m.[39mtoHaveAttribute([32m'type'[39m[33m,[39m [32m'file'[39m)[33m;[39m
     [90m 179 |[39m       expect(input)[33m.[39mtoHaveClass([32m'hidden'[39m)[33m;[39m
     [90m 180 |[39m     })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ExcelUploader.test.js:177:28)

FAIL src/components/__tests__/Charts.test.js
  ‚óè Test suite failed to run

    Cannot find module '../Charts' from 'src/components/__tests__/Charts.test.js'

    [0m [90m  7 |[39m [36mimport[39m { render[33m,[39m screen[33m,[39m fireEvent[33m,[39m waitFor } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
     [90m  8 |[39m [36mimport[39m userEvent [36mfrom[39m [32m'@testing-library/user-event'[39m[33m;[39m
    [31m[1m>[22m[39m[90m  9 |[39m [36mimport[39m { 
     [90m    |[39m [31m[1m^[22m[39m
     [90m 10 |[39m   [33mCashFlowWaterfallChart[39m[33m,[39m
     [90m 11 |[39m   [33mProfitWaterfallChart[39m[33m,[39m
     [90m 12 |[39m   [33mFundingStructureChart[39m[33m,[39m[0m

      at Resolver.resolveModule (node_modules/jest-resolve/build/resolver.js:324:11)
      at Object.<anonymous> (src/components/__tests__/Charts.test.js:9:1)

FAIL src/components/__tests__/ManualDataEntry.test.js (7.025 s)
  ‚óè ManualDataEntry Component ‚Ä∫ User Interactions ‚Ä∫ should handle period type change

    TestingLibraryElementError: Value "QUARTERLY" not found in options

    Ignored nodes: comments, script, style
    [36m<select[39m
      [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
      [33mid[39m=[32m"periodTypeEntry"[39m
    [36m>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"anos"[39m
      [36m>[39m
        [0mAnos[0m
      [36m</option>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"trimestres"[39m
      [36m>[39m
        [0mTrimestres[0m
      [36m</option>[39m
      [36m<option[39m
        [33mvalue[39m=[32m"meses"[39m
      [36m>[39m
        [0mMeses[0m
      [36m</option>[39m
    [36m</select>[39m

    [0m [90m 73 |[39m       
     [90m 74 |[39m       [36mconst[39m typeSelect [33m=[39m screen[33m.[39mgetByLabelText([35m/Tipo de Per√≠odo/i[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 75 |[39m       [36mawait[39m user[33m.[39mselectOptions(typeSelect[33m,[39m [32m'QUARTERLY'[39m)[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m 76 |[39m       
     [90m 77 |[39m       expect(defaultProps[33m.[39monPeriodTypeChange)[33m.[39mtoHaveBeenCalledWith([32m'QUARTERLY'[39m)[33m;[39m
     [90m 78 |[39m     })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:39:39
          at Array.map (<anonymous>)
      at Object.selectOptionsBase (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:31:38)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/utility/selectOptions.js:18:30)
      at node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:45
      at Object.asyncWrapper (node_modules/@testing-library/dom/dist/config.js:23:23)
      at Object.wrapAsync (node_modules/@testing-library/user-event/dist/cjs/setup/wrapAsync.js:8:28)
      at Object.selectOptions (node_modules/@testing-library/user-event/dist/cjs/setup/setup.js:85:26)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:75:18)

  ‚óè ManualDataEntry Component ‚Ä∫ Submit functionality ‚Ä∫ should show loading state

    TestingLibraryElementError: Found multiple elements with the role "button"

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0mÔøΩÔøΩ DRE - Itens de Resultado (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0mÔøΩÔøΩ Balan√ßo Patrimonial (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"flex items-center justify-between w-full p-3 bg-sky-100 hover:bg-sky-200 rounded-lg transition-colors mb-3 shadow-sm"[39m
      [33mtype[39m=[32m"button"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
        [36m>[39m
          [0mÔøΩÔøΩ Fluxo de Caixa (Overrides Opcionais)[0m
        [36m</span>[39m
        [36m<span[39m
          [33mclass[39m=[32m"text-xs bg-sky-200 text-sky-800 px-2 py-0.5 rounded-full"[39m
        [36m>[39m
          [0mOpcional Avan√ßado[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"w-5 h-5 text-sky-600 transition-transform "[39m
          [33mfill[39m=[32m"none"[39m
          [33mstroke[39m=[32m"currentColor"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
        [36m>[39m
          [36m<path[39m
            [33md[39m=[32m"M19 9l-7 7-7-7"[39m
            [33mstroke-linecap[39m=[32m"round"[39m
            [33mstroke-linejoin[39m=[32m"round"[39m
            [33mstroke-width[39m=[32m"2"[39m
          [36m/>[39m
        [36m</svg>[39m
      [36m</div>[39m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"[39m
      [33mdisabled[39m=[32m""[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex items-center justify-center space-x-2"[39m
      [36m>[39m
        [36m<svg[39m
          [33mclass[39m=[32m"animate-spin h-4 w-4 text-white"[39m
          [33mfill[39m=[32m"none"[39m
          [33mviewBox[39m=[32m"0 0 24 24"[39m
          [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
        [36m>[39m
          [36m<circle[39m
            [33mclass[39m=[32m"opacity-25"[39m
            [33mcx[39m=[32m"12"[39m
            [33mcy[39m=[32m"12"[39m
            [33mr[39m=[32m"10"[39m
            [33mstroke[39m=[32m"currentColor"[39m
            [33mstroke-width[39m=[32m"4"[39m
          [36m/>[39m
          [36m<path[39m
            [33mclass[39m=[32m"opacity-75"[39m
            [33md[39m=[32m"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"[39m
            [33mfill[39m=[32m"currentColor"[39m
          [36m/>[39m
        [36m</svg>[39m
        [36m<span>[39m
          [0mProcessando...[0m
        [36m</span>[39m
      [36m</div>[39m
    [36m</button>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0mÔøΩÔøΩ[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (ÔøΩÔøΩ)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0mÔøΩÔøΩ Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 108 |[39m       
     [90m 109 |[39m       expect(screen[33m.[39mgetByText([32m'Processando...'[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 110 |[39m       expect(screen[33m.[39mgetByRole([32m'button'[39m))[33m.[39mtoBeDisabled()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 111 |[39m     })[33m;[39m
     [90m 112 |[39m   })[33m;[39m
     [90m 113 |[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByRole (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:110:21)

  ‚óè ManualDataEntry Component ‚Ä∫ Override sections ‚Ä∫ should render override sections as collapsed by default

    TestingLibraryElementError: Found multiple elements with the text: /Fluxo de Caixa/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Fluxo de Caixa (Overrides Opcionais)[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0mÔøΩÔøΩ[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (ÔøΩÔøΩ)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0mÔøΩÔøΩ Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 118 |[39m       expect(screen[33m.[39mgetByText([35m/DRE - Itens de Resultado/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m 119 |[39m       expect(screen[33m.[39mgetByText([35m/Balan√ßo Patrimonial/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 120 |[39m       expect(screen[33m.[39mgetByText([35m/Fluxo de Caixa/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 121 |[39m     })[33m;[39m
     [90m 122 |[39m
     [90m 123 |[39m     it([32m'should expand override sections when clicked'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByText (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:120:21)

  ‚óè ManualDataEntry Component ‚Ä∫ Override sections ‚Ä∫ should expand override sections when clicked

    TestingLibraryElementError: Found multiple elements with the text: /Override/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li>[39m
      [0mValores inseridos nos campos de **Override (ÔøΩÔøΩ)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0mÔøΩÔøΩ DRE - Itens de Resultado (Overrides Opcionais)[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<th[39m
      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Item Financeiro (Override)[0m
    [36m</th>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ CPV/CSV (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Lucro Bruto (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ EBITDA (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ EBIT (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ LAIR/PBT (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Imposto de Renda (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Lucro L√≠quido (Override)[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Balan√ßo Patrimonial (Overrides Opcionais)[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"text-lg font-medium text-sky-700"[39m
    [36m>[39m
      [0mÔøΩÔøΩ Fluxo de Caixa (Overrides Opcionais)[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<section[39m
          [33mclass[39m=[32m"mb-8 p-6 bg-white rounded-xl shadow-lg border border-slate-200"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-slate-700 mb-6 text-center"[39m
          [36m>[39m
            [0mEntrada Manual de Dados - Modo Adaptativo[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [0mN√∫mero de Per√≠odos ([0m
                [0m2[0m
                [0m-[0m
                [0m6[0m
                [0m):[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"numberOfPeriodsEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"2"[39m
                [36m>[39m
                  [0m2[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"3"[39m
                [36m>[39m
                  [0m3[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"4"[39m
                [36m>[39m
                  [0m4[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"5"[39m
                [36m>[39m
                  [0m5[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"6"[39m
                [36m>[39m
                  [0m6[0m
                  [0m Per√≠odos[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-slate-700 mb-1"[39m
                [33mfor[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [0mTipo de Per√≠odo:[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"w-full p-2.5 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"[39m
                [33mid[39m=[32m"periodTypeEntry"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"anos"[39m
                [36m>[39m
                  [0mAnos[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"trimestres"[39m
                [36m>[39m
                  [0mTrimestres[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"meses"[39m
                [36m>[39m
                  [0mMeses[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-sky-50 p-4 rounded-lg mb-6 border border-sky-200 text-sm text-sky-700"[39m
          [36m>[39m
            [36m<h4[39m
              [33mclass[39m=[32m"font-semibold text-sky-800 mb-2 flex items-center"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-lg mr-2"[39m
              [36m>[39m
                [0mÔøΩÔøΩ[0m
              [36m</span>[39m
              [0m Como Funciona o Modo Adaptativo:[0m
            [36m</h4>[39m
            [36m<ul[39m
              [33mclass[39m=[32m"list-disc list-inside space-y-1 pl-2"[39m
            [36m>[39m
              [36m<li>[39m
                [0mPreencha os **Dados Principais / Drivers** para que o sistema calcule automaticamente as demonstra√ß√µes.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mSe possuir valores reais para itens espec√≠ficos da DRE, Balan√ßo ou Fluxo de Caixa, expanda as se√ß√µes de **Overrides Opcionais** e insira esses valores.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mValores inseridos nos campos de **Override (ÔøΩÔøΩ)** ter√£o prioridade sobre os c√°lculos autom√°ticos do sistema para aquele item espec√≠fico.[0m
              [36m</li>[39m
              [36m<li>[39m
                [0mA "Diferen√ßa de Balan√ßo" e as "Valida√ß√µes de Dados" ajudar√£o a identificar poss√≠veis inconsist√™ncias.[0m
              [36m</li>[39m
            [36m</ul>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 "[39m
          [36m>[39m
            [36m<h3[39m
              [33mclass[39m=[32m"text-lg font-semibold text-slate-700 mb-4"[39m
            [36m>[39m
              [0mÔøΩÔøΩ Dados Principais / Drivers Essenciais[0m
            [36m</h3>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto border border-slate-300 rounded-lg mt-2 animation-fade-in"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full border-collapse"[39m
              [36m>[39m
                [36m<thead>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"bg-slate-100"[39m
                  [36m>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-left text-sm font-semibold text-slate-700 sticky left-0 bg-slate-100 z-10 min-w-[250px] md:min-w-[300px]"[39m
                    [36m>[39m
                      [0mItem Financeiro[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m1[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                    [36m>[39m
                      [0mPer√≠odo [0m
                      [0m2[0m
                      [36m<span[39m
                        [33mclass[39m=[32m"font-normal text-xs block"[39m
                      [36m>[39m
                        [0m([0m
                        [0mMONTHLY[0m
                        [0m)[0m
                      [36m</span>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"p-3 border-x border-slate-300 text-center text-sm font-semibold text-slate-700 min-w-[120px]"[39m
                   ...

    [0m [90m 129 |[39m       
     [90m 130 |[39m       [90m// Section should expand and show additional content[39m
    [31m[1m>[22m[39m[90m 131 |[39m       expect(screen[33m.[39mgetByText([35m/Override/[39m))[33m.[39mtoBeInTheDocument()[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 132 |[39m     })[33m;[39m
     [90m 133 |[39m   })[33m;[39m
     [90m 134 |[39m })[33m;[39m[0m

      at Object.getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at getByText (node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/components/__tests__/ManualDataEntry.test.js:131:21)

FAIL src/__tests__/integration/phase2-components.integration.test.js (9.608 s)
  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App renders without crashing

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:327:13)

  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App switches between input methods correctly

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:334:13)

  ‚óè Phase 2 Components Integration Tests ‚Ä∫ ReportGeneratorApp Integration ‚Ä∫ App maintains state consistency across method switches

    useStorage must be used within StorageProvider

    [0m [90m 17 |[39m   [36mconst[39m context [33m=[39m useContext([33mStorageContext[39m)[33m;[39m
     [90m 18 |[39m   [36mif[39m ([33m![39mcontext) {
    [31m[1m>[22m[39m[90m 19 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m'useStorage must be used within StorageProvider'[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 20 |[39m   }
     [90m 21 |[39m   [36mreturn[39m context[33m;[39m
     [90m 22 |[39m }[33m;[39m[0m

      at useStorage (src/context/StorageContext.jsx:19:11)
      at ReportGeneratorApp (src/components/ReportGeneratorApp.jsx:120:92)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:15486:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20103:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21626:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27465:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25789:22)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at actWithWarning (node_modules/react-dom/cjs/react-dom-test-utils.development.js:1740:10)
      at node_modules/@testing-library/react/dist/act-compat.js:63:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:159:26)
      at render (node_modules/@testing-library/react/dist/pure.js:246:10)
      at Object.<anonymous> (src/__tests__/integration/phase2-components.integration.test.js:349:13)


Test Suites: 19 failed, 4 passed, 23 total
Tests:       100 failed, 324 passed, 424 total
Snapshots:   0 total
Time:        25.627 s
Ran all test suites.
